(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19f92466"],{"550b":function(t,e,a){},"89c4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("vxe-grid",t._b({ref:"xGrid",scopedSlots:t._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:t.shppingsearchFormData},on:{submit:t.searchEvent,reset:t.resetEvent}},[a("vxe-form-item",{attrs:{title:"全局搜索"},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-input",{attrs:{placeholder:"请选择",options:t.selectoptions.customer_name_options,clearable:"",filterable:""},on:{clear:t.WhenClear},model:{value:t.shppingsearchFormData.search_data,callback:function(e){t.$set(t.shppingsearchFormData,"search_data",e)},expression:"shppingsearchFormData.search_data"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"日期查询"},scopedSlots:t._u([{key:"default",fn:function(){return[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",shortcuts:t.shortcuts,size:t.size},on:{clear:t.WhenClear},model:{value:t.shppingsearchFormData.delivery_date,callback:function(e){t.$set(t.shppingsearchFormData,"delivery_date",e)},expression:"shppingsearchFormData.delivery_date"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"toolbar_buttons",fn:function(){return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(e){return t.addRow()}}},[t._v("添加发货单")])]},proxy:!0},{key:"operation",fn:function(e){var i=e.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(e){return t.editRow(i)}}},[t._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(e){return t.deleteRow(i)}}},[t._v("删除")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(e){return t.downloadRow(i)}}},[t._v("下载PDF")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(e){return t.downloadRowExcel(i)}}},[t._v("下载Excel")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[t._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",t.shppinggridOptions,!1)),a("vxe-modal",{attrs:{title:"请选择打印模板",width:"900",resize:"","destroy-on-close":""},model:{value:t.modalDisplayPrint,callback:function(e){t.modalDisplayPrint=e},expression:"modalDisplayPrint"}},[a("el-form",{staticClass:"form",attrs:{"label-width":"100px"}},[a("el-row",{staticStyle:{width:"96%"},attrs:{xs:24}},[[a("div",t._l(t.groupedOptions,(function(e,i){return a("div",{key:i,staticClass:"row"},t._l(e,(function(e){return a("div",{key:e.label,staticClass:"col",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"form-item"},[a("img",{staticClass:"image",attrs:{src:e.image,alt:"模板"+e.label},on:{click:function(a){return t.EnlargePicture(e.image)}}}),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedOption,expression:"selectedOption"}],attrs:{type:"radio"},domProps:{value:e.label,checked:t._q(t.selectedOption,e.label)},on:{change:[function(a){t.selectedOption=e.label},t.handleRadioChange]}}),t._v(" 类型"+t._s(e.label)+" ")])])])})),0)})),0)]],2),a("el-row",{staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(e){t.modalDisplayPrint=!1}}},[t._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:t.EnterDownloadRow}},[t._v("下载")])],1)],1)],1),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleClose}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imageUrl,alt:"预览图片"}})]),a("vxe-modal",{attrs:{title:t.上传回单,width:"390",resize:"","destroy-on-close":""},model:{value:t.modalUploadDisplay,callback:function(e){t.modalUploadDisplay=e},expression:"modalUploadDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"80"}},[a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:function(e){t.modalUploadDisplay=!1}}},[t._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:t.manualUpload}},[t._v("上传附件")])],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!0,action:"http://192.168.1.212:8000/vue-element-admin/backend/upload_file/?extra_data=upload_pdf",data:t.uploadData,"on-success":t.handleSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),a("vxe-modal",{attrs:{title:"新增",width:"500",resize:"","destroy-on-close":""},model:{value:t.modalDisplay,callback:function(e){t.modalDisplay=e},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:t.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:t.modalForm.project_name_id,callback:function(e){t.$set(t.modalForm,"project_name_id",e)},expression:"modalForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:t.modalForm.driver_name_id,callback:function(e){t.$set(t.modalForm,"driver_name_id",e)},expression:"modalForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.username_options,clearable:"",filterable:""},model:{value:t.modalForm.username_id,callback:function(e){t.$set(t.modalForm,"username_id",e)},expression:"modalForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:t.modalForm.customer_name_id,callback:function(e){t.$set(t.modalForm,"customer_name_id",e)},expression:"modalForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:t.modalForm.delivery_date,callback:function(e){t.$set(t.modalForm,"delivery_date",e)},expression:"modalForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(e){t.modalDisplay=!1}}},[t._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[t._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"500",resize:"","destroy-on-close":""},model:{value:t.modalEditDisplay,callback:function(e){t.modalEditDisplay=e},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:t.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:t.modalEditForm.project_name_id,callback:function(e){t.$set(t.modalEditForm,"project_name_id",e)},expression:"modalEditForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:t.modalEditForm.driver_name_id,callback:function(e){t.$set(t.modalEditForm,"driver_name_id",e)},expression:"modalEditForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.username_options,clearable:"",filterable:""},model:{value:t.modalEditForm.username_id,callback:function(e){t.$set(t.modalEditForm,"username_id",e)},expression:"modalEditForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:t.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:t.modalEditForm.customer_name_id,callback:function(e){t.$set(t.modalEditForm,"customer_name_id",e)},expression:"modalEditForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:t.modalEditForm.delivery_date,callback:function(e){t.$set(t.modalEditForm,"delivery_date",e)},expression:"modalEditForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(e){t.modalEditDisplay=!1}}},[t._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[t._v("提交")])],1)],1)],1)],1)},o=[],n=a("5530"),l=(a("13d5"),a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("a388")),s=a("d96b"),r=a("2f62"),d={computed:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["sidebar","avatar","device","name","shppingsearchFormData"])),{},{groupedOptions:function(){var t=3;return this.options.reduce((function(e,a,i){var o=Math.floor(i/t);return e[o]||(e[o]=[]),e[o].push(a),e}),[])}}),data:function(){var t=this;return{dowloadRow:[],uploadData:{file_type:"已签收发货单"},modalUploadDisplay:!1,imageUrl:"",dialogVisible:!1,shippingid:[],selectedOption:{},options:[{label:"1",image:"http://192.168.1.223:8000/static/template 1.jpg"},{label:"2",image:"http://192.168.1.223:8000/static/template 2.jpg"},{label:"3",image:"http://192.168.1.223:8000/static/template 3.jpg"},{label:"4",image:"http://192.168.1.223:8000/static/template 4.jpg"},{label:"5",image:"http://192.168.1.223:8000/static/template 5.jpg"},{label:"6",image:"http://192.168.1.223:8000/static/template 6.jpg"}],selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalDisplayPrint:!1,modalEditForm:{},shppinggridOptions:{resizable:!0,showOverflow:!0,border:"inner",rowId:"id",rowConfig:{isHover:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:20,pageSizes:[20,50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(e){var a=e.page;e.sorts,e.filters;t.shppingsearchFormData.username=t.name;var i={action:"shipping_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:t.shppingsearchFormData};return Object(s["a"])(i)}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号",width:"50px"},{field:"customer_name_id",title:"客户名",width:"300px",sortable:!0},{field:"order_number",title:"订单号码",width:"260px",sortable:!0},{field:"shippingid",title:"发货单编号",width:"160px",sortable:!0},{field:"shipping_address",title:"送货地址",sortable:!0},{field:"driver_name_id",title:"司机姓名"},{field:"username_id",title:"发货人",sortable:!0},{field:"delivery_date",title:"出货日期",sortable:!0},{title:"操作",showOverflow:!0,width:"380px",fixed:"right",slots:{default:"operation"}}]}}},created:function(){console.log("111"+this.shppingsearchFormData),console.log("111"+this.name)},mounted:function(){this.getOptions(),this.$refs.radio.$children.forEach((function(t){t.$refs.radio.removeAttribute("aria-hidden")}))},methods:{handleRadioChange:function(){console.log("选中的类型:",this.selectedOption)},EnlargePicture:function(t){this.dialogVisible=!0,this.imageUrl=t,console.log("点击放大图片:",t)},handleSuccess:function(t,e,a){console.log(t),l["VXETable"].modal.message({content:"上传成功",status:"success"})},manualUpload:function(){var t=this;this.afterUpload().then((function(){t.modalUploadDisplay=!1,t.uploadData={}}))},uploadPDF:function(){this.modalUploadDisplay=!0},handleClose:function(){this.dialogVisible=!1},CallPrint:function(){this.modalDisplayPrint=!0},WhenClear:function(){this.shppingsearchFormData={}},getOptions:function(){var t=this,e={action:"shipping_table_view",subaction:"getOptions"};Object(s["a"])(e).then((function(e){console.log(e.data),t.selectoptions=e.data}))},addRow:function(){var t=Math.floor(Date.now())%1e8;this.$router.push({path:"/erpshipping/shipping_add",query:{shippingid:t}})},modalSubmitEvent:function(){var t=this,e={action:"shipping_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(s["a"])(e).then((function(e){t.modalDisplay=!1,l["VXETable"].modal.message({content:"提交成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=e.$refs.xGrid.$data["tableData"];for(var i in a)t.id===a[i].id&&a.splice(i,1);var o={action:"shipping_table_view",subaction:"deleteRecord",idmap:{shippingid:t.shippingid}};Object(s["a"])(o).then((function(t){l["VXETable"].modal.message({content:"删除成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))}))},editRow:function(t){this.$router.push({path:"/erpshipping/shipping_edit",query:{shippingid:t.shippingid}})},downloadRow:function(t){this.shippingid=t.shippingid,this.dowloadRow=t,this.modalDisplayPrint=!0},EnterDownloadRow:function(){0!==this.selectedOption.length?(this.getPdfFile(),this.modalDisplayPrint=!1):l["VXETable"].modal.message({content:"请选择送货单模板",status:"warning"})},getPdfFile:function(){var t=this,e={action:"shipping_table_view",subaction:"downloadRecord",shippingid:this.shippingid,file_type:this.selectedOption};Object(s["a"])(e).then((function(e){var a={shippingid:t.shippingid};Object(s["b"])(a).then((function(e){console.log(e),l["VXETable"].saveFile({filename:t.dowloadRow.delivery_date+" "+t.dowloadRow.shipping_address+" "+t.dowloadRow.shippingid,type:e.headers["my_file_type"],content:e.data})}))}))},downloadRowExcel:function(t){var e={action:"shipping_table_view",subaction:"downloadExcel",shippingid:t.shippingid};Object(s["a"])(e).then((function(e){console.log(e);var a={shippingid_excel:t.shippingid};Object(s["b"])(a).then((function(e){console.log(e),l["VXETable"].saveFile({filename:t.delivery_date+" "+t.shipping_address+" "+t.shippingid,type:e.headers["my_file_type"],content:e.data})}))})).catch((function(t){console.error("Error in downloadFile:",t)})).catch((function(t){console.error("Error in downloadFile:",t)}))},modalEditSubmitEvent:function(){var t=this,e={action:"shipping_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{shippingid:this.modalEditForm.shippingid}};Object(s["a"])(e).then((function(e){t.modalEditDisplay=!1,l["VXETable"].modal.message({content:"提交成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},resetEvent:function(){this.shppingsearchFormData={},this.$refs.xGrid.commitProxy("reload")}}},c=d,p=(a("b680d"),a("2877")),m=Object(p["a"])(c,i,o,!1,null,null,null);e["default"]=m.exports},b680d:function(t,e,a){"use strict";a("550b")},d96b:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return n}));var i=a("b775");function o(t){return Object(i["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:t})}}}]);