(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2991fce5"],{"0028":function(t,e,a){},"004d":function(t,e,a){},"38cf":function(t,e,a){var i=a("23e7"),n=a("1148");i({target:"String",proto:!0},{repeat:n})},"38d8":function(t,e,a){"use strict";a("004d")},"4e82":function(t,e,a){"use strict";var i=a("23e7"),n=a("1c0b"),r=a("7b0b"),o=a("d039"),s=a("a640"),l=[],c=l.sort,u=o((function(){l.sort(void 0)})),d=o((function(){l.sort(null)})),f=s("sort"),p=u||!d||!f;i({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(r(this)):c.call(r(this),n(t))}})},"726f":function(t,e,a){"use strict";a("0028")},"78e3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vxe-modal",{attrs:{title:"附件上传",width:"860px",resize:"","destroy-on-close":"","show-footer":""},scopedSlots:t._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确认")]),a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("关闭")])]},proxy:!0}]),model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"dialog-body"},[a("el-upload",{ref:"uploader",staticClass:"upload-btn",attrs:{limit:t.maxCount,"auto-upload":!1,"show-file-list":!1,multiple:!0,"on-exceed":t.handleExceed,"on-change":t.handleSelect}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-upload2",staticStyle:{"margin-right":"4px"}}),t._v("选择文件 ")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" "+t._s(t.maxCount===1/0?"":"最多上传"+t.maxCount+" 个文件")+" ")])],1),a("div",{ref:"dropZone",staticClass:"file-zone",on:{dragenter:function(e){return e.preventDefault(),t.onDragEnter(e)},dragover:function(t){t.preventDefault()},dragleave:function(e){return e.preventDefault(),t.onDragLeave(e)},drop:function(e){return e.preventDefault(),t.onDrop(e)}}},[a("transition",{attrs:{name:"fade"}},[t.dragging?a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"48px"}}),a("p",[t._v("松开鼠标上传文件")])]):t._e()]),a("vxe-table",{attrs:{data:t.fileList,"show-overflow":"",size:"small",height:"400"}},[a("vxe-column",{attrs:{type:"seq",width:"50",title:"#"}}),a("vxe-column",{attrs:{field:"filename",title:"文件名"}}),a("vxe-column",{attrs:{field:"file_size",title:"大小(MB)",width:"120",align:"center"}}),a("vxe-column",{attrs:{title:"操作",width:"230",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(e){return t.editName(i)}}},[t._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(e){return t.remove(i)}}},[t._v("删除")])]}}])})],1)],1)],1)])},n=[],r=a("b85c"),o=a("5530"),s=a("2909"),l=(a("a630"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("3ca3"),a("0643"),a("4e3e"),a("a573"),a("9a9a"),a("159b"),{name:"UploadAttachmentDialog",props:{value:{type:Boolean,default:!1},initFiles:{type:Array,default:function(){return[]}},maxCount:{type:Number,default:1/0}},data:function(){return{visible:this.value,dragging:!1,fileList:Object(s["a"])(this.initFiles)}},watch:{initFiles:function(t){var e=this;this.fileList=t.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{file_size:e.toMB(t.file_size)})})),console.log(this.fileList)},value:function(t){this.visible=t},visible:function(t){this.$emit("input",t)}},methods:{handleExceed:function(){this.$message.warning("最多只能上传 ".concat(this.maxCount===1/0?"不限":this.maxCount+" 件"," 附件"))},isDirectory:function(t){return!t.type&&0===t.file_size},toKB:function(t){return(t/1024).toFixed(1)},toMB:function(t){return(t/1024/1024).toFixed(2)},handleSelect:function(t){this.isDirectory(t.raw||t)?this.$message.warning("暂不支持文件夹上传，请选择具体文件"):this.pushFile(t.raw||t)},onDragEnter:function(){this.dragging=!0},onDragLeave:function(t){var e=this.$refs.dropZone;e.contains(t.relatedTarget)||(this.dragging=!1)},onDrop:function(t){var e=this;this.dragging=!1;var a=t.dataTransfer,i=a.items,n=a.files;if(i&&i.length){var o,s=Object(r["a"])(i);try{for(s.s();!(o=s.n()).done;){var l,c=o.value;if("file"===c.kind){var u=null===(l=c.webkitGetAsEntry)||void 0===l?void 0:l.call(c);if(u&&u.isDirectory)this.$message.warning("暂不支持文件夹上传，请选择具体文件");else{var d=c.getAsFile();this.pushFile(d)}}}}catch(f){s.e(f)}finally{s.f()}}else Array.from(n||[]).forEach((function(t){e.isDirectory(t)?e.$message.warning("暂不支持文件夹上传，请选择具体文件"):e.pushFile(t)}))},pushFile:function(t){var e=this;this.fileList.some((function(a){return a.filename===t.name&&a.file_size===e.toMB(t.size)}))?this.$message.warning("发现重名文件 ".concat(t.name," ，如需覆盖原文件请先删除原文件。")):this.fileList.push({uid:Date.now()+Math.random(),filename:t.name,file_size:this.toMB(t.size),raw:t})},remove:function(t){var e=this;this.$confirm("确认删除此文件？","提示").then((function(){var a=e.fileList.indexOf(t);a>-1&&e.fileList.splice(a,1)}))},editName:function(t){var e=t.filename.lastIndexOf("."),a=-1!==e?t.filename.slice(e):"",i=-1!==e?t.filename.slice(0,e):t.filename;this.$prompt("修改文件名（扩展名 ".concat(a," 会自动保留）"),"重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:i,inputPattern:/^[^\\/:*?"<>|]+$/,inputErrorMessage:'文件名不能包含 \\ / : * ? " < > |'}).then((function(e){var i=e.value;t.filename=i+a}))},handleConfirm:function(){this.$emit("confirm",this.fileList),this.visible=!1}}}),c=l,u=(a("726f"),a("2877")),d=Object(u["a"])(c,i,n,!1,null,"b71fea88",null);e["a"]=d.exports},"7db0":function(t,e,a){"use strict";var i=a("23e7"),n=a("b727").find,r=a("44d2"),o=a("ae40"),s="find",l=!0,c=o(s);s in[]&&Array(1)[s]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},ba05:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"备注模板管理",visible:t.visible,width:"860px"},on:{close:t.handleClose}},[a("div",{staticClass:"mb-2 flex items-center"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.openAdd}},[t._v("新增模板")]),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.reload}},[t._v("刷新")])],1),a("vxe-table",{ref:"tplTable",attrs:{data:t.tableData,border:"",size:"small",loading:t.loading,height:"400","show-overflow":""}},[a("vxe-column",{attrs:{type:"seq",width:"50",title:"#"}}),a("vxe-column",{attrs:{field:"template_name",title:"模板名称"}}),a("vxe-column",{attrs:{field:"creat_date",title:"创建日期",width:"110"}}),a("vxe-column",{attrs:{field:"creat_user",title:"创建人",width:"80"}}),a("vxe-column",{attrs:{title:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{status:"primary",type:"text",size:"small"},on:{click:function(e){return t.handleUse(i)}}},[t._v(" 使用 ")]),a("el-button",{attrs:{status:"primary",type:"text",size:"small"},on:{click:function(e){return t.openEdit(i)}}},[t._v("编辑")]),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{status:"danger",type:"text",size:"small"},on:{click:function(e){return t.remove(i)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"mt-2 text-center"},[a("vxe-pager",{attrs:{size:"mini","current-page":t.pager.currentPage,"page-size":t.pager.pageSize,total:t.pager.total,layouts:["PrevPage","JumpNumber","NextPage","Total"]},on:{"update:currentPage":function(e){return t.$set(t.pager,"currentPage",e)},"update:current-page":function(e){return t.$set(t.pager,"currentPage",e)},"update:pageSize":function(e){return t.$set(t.pager,"pageSize",e)},"update:page-size":function(e){return t.$set(t.pager,"pageSize",e)},"page-change":t.reload}})],1),a("el-dialog",{attrs:{title:t.editMode?"编辑模板":"新增模板",visible:t.formVisible,width:"760px",top:"70px","append-to-body":""},on:{"update:visible":function(e){t.formVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"模板名称"}},[a("el-input",{model:{value:t.form.template_name,callback:function(e){t.$set(t.form,"template_name",e)},expression:"form.template_name"}})],1),a("el-form-item",{attrs:{label:"内容"}},[a("quill-editor",{staticStyle:{height:"260px"},attrs:{options:t.editorOptions},model:{value:t.form.remarks_data,callback:function(e){t.$set(t.form,"remarks_data",e)},expression:"form.remarks_data"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.formVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},n=[],r=a("c7eb"),o=a("1da1"),s=a("5530"),l=(a("b0c0"),a("ac1f"),a("38cf"),a("5319"),a("953d")),c=(a("a753"),a("8096"),a("d96b")),u=a("2f62"),d={name:"RemarkTemplateDialog",components:{quillEditor:l["quillEditor"]},props:{visible:{type:Boolean,default:!1}},computed:Object(s["a"])({quillEditor:l["quillEditor"]},Object(u["b"])(["sidebar","avatar","device","name"])),data:function(){return{tableData:[],pager:{currentPage:1,pageSize:9,total:0},loading:!1,formVisible:!1,editMode:!1,form:{template_name:"",remarks_data:"",creat_user:""},editorOptions:{theme:"snow",placeholder:"输入模板内容...",modules:{toolbar:!1}}}},watch:{visible:function(t){t&&this.reload()}},methods:{handleUse:function(t){this.$emit("select",t.remarks_data),console.log(t.remarks_data),this.$emit("update:visible",!1)},handleClose:function(){this.$emit("update:visible",!1)},reload:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a,i,n,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.pager,i=a.currentPage,n=a.pageSize,e.next=4,Object(c["b"])({action:"remarks_template_view",subaction:"query",pageNum:i,pageSize:n});case 4:o=e.sent,console.log(o),t.tableData=o.data,t.pager.total=o.total,t.loading=!1;case 9:case"end":return e.stop()}}),e)})))()},openAdd:function(){this.editMode=!1,this.form={template_name:"",remarks_data:"",creat_user:this.name||"系统"},this.$emit("update:visible",!0),this.formVisible=!0},openEdit:function(t){this.editMode=!0,this.form=Object(s["a"])({},t),this.formVisible=!0},save:function(){var t=this;return Object(o["a"])(Object(r["a"])().mark((function e(){var a,i,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(s["a"])({},t.form),delete a._X_ROW_KEY,a.remarks_data&&(a.remarks_data=a.remarks_data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/ {2,}/g,(function(t){return"&nbsp;".repeat(t.length)}))),i=t.editMode?"editRecord":"addRecord",n=t.editMode?{idmap:{templateid:t.form.templateid},modalEditForm:a}:{modalForm:a},e.next=7,Object(c["b"])(Object(s["a"])({action:"remarks_template_view",subaction:i},n));case 7:t.$message.success("保存成功"),t.formVisible=!1,t.reload();case 10:case"end":return e.stop()}}),e)})))()},remove:function(t){var e=this;return Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$confirm("确定删除该模板？","提示").then(Object(o["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["b"])({action:"remarks_template_view",subaction:"deleteRecord",idmap:{templateid:t.templateid}});case 2:e.$message.success("已删除"),e.reload();case 4:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()}}},f=d,p=(a("38d8"),a("2877")),m=Object(p["a"])(f,i,n,!1,null,"1face4b8",null);e["a"]=m.exports},d96b:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return s}));var i=a("5530"),n=a("b775");function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])(Object(i["a"])({url:"".concat("","/vue-element-admin/backend/process/"),method:"post",data:t,timeout:5e3},e))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])(Object(i["a"])({url:"".concat("","/vue-element-admin/backend/download_file/"),method:"get",params:t,responseType:"blob",timeout:0},e))}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])(Object(i["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:t,responseType:"blob",noCodeCheck:!0,timeout:0},e))}},e9c4:function(t,e,a){var i=a("23e7"),n=a("d066"),r=a("d039"),o=n("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var i=a.charAt(e-1),n=a.charAt(e+1);return l.test(t)&&!c.test(n)||c.test(t)&&!l.test(i)?"\\u"+t.charCodeAt(0).toString(16):t},d=r((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&i({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,a){var i=o.apply(null,arguments);return"string"==typeof i?i.replace(s,u):i}})},fffc:function(t,e,a){"use strict";var i=a("23e7"),n=a("2266"),r=a("1c0b"),o=a("825a");i({target:"Iterator",proto:!0,real:!0},{find:function(t){return o(this),r(t),n(this,(function(e){if(t(e))return n.stop(e)}),void 0,!1,!0).result}})}}]);