(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6389f0f4"],{"059e":function(t,e,i){"use strict";i("9a0d")},"6f39":function(t,e,i){"use strict";i("f794")},9406:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard-editor-container"},[i("el-row",{staticClass:"upper-row",staticStyle:{height:"100%"},attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"title-panel",staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("出货计划")])]),i("Plan",{staticStyle:{height:"85%"}})],1),i("el-col",{staticStyle:{height:"100%"},attrs:{span:8}},[i("div",{staticClass:"title-panel",staticStyle:{"margin-bottom":"10px"}},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("库存列表")])]),i("InventoryTable",{staticStyle:{height:"85%"}})],1),i("el-col",{staticStyle:{height:"100%"},attrs:{span:8}},[i("div",{staticClass:"title-panel"},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("生产进度看板")])]),i("el-row",t._l(t.chartdatalist,(function(e){return i("el-col",{key:e.title,staticStyle:{"margin-left":"20px"},attrs:{span:4}},[i("ring-chart",{attrs:{"chart-data":e}}),i("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-tag",[t._v("订单总数："+t._s(e.total_count))])],1),i("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-tag",[t._v("已完成数："+t._s(e.finished_count))])],1)],1)})),1)],1)],1),i("el-row",{staticClass:"lower-row",attrs:{gutter:20}},[i("el-col",{staticStyle:{height:"100%",width:"100%"},attrs:{span:24}},[i("div",{staticClass:"title-panel",staticStyle:{"margin-bottom":"10px",width:"100%"}},[i("el-row",{staticStyle:{"margin-left":"20px",display:"flex","align-items":"center"}},[i("span",[t._v("排产图(近20天)")]),i("el-image",{staticStyle:{height:"17px",width:"auto","margin-left":"auto","margin-right":"20px"},attrs:{src:"http://192.168.1.223:8000/static/sign.png"}})],1)],1),i("PaiChan",{staticStyle:{height:"90%"}})],1)],1)],1)},a=[],s=i("b85c"),r=(i("d3b7"),i("3ca3"),i("ddb0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{width:t.width,height:t.height}},[i("div",{class:t.className,style:{height:t.height,width:t.width}})])}),l=[],c=i("313e"),o=i.n(c),h=i("ed08"),d={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(h["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};i("817d");var u={mixins:[d],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"130px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null,chartoption:{color:["#409EFF","#C0C4CC"],title:{text:"切割",left:"center",textStyle:{color:"#333",fontSize:16},top:"43%"},tooltip:{show:!1},legend:{show:!1},series:[{name:"",type:"pie",radius:["60%","80%"],label:{show:!1},labelLine:{show:!1},data:[]}]}}},watch:{chartData:{deep:!0,handler:function(t){console.log("chartData change, globalForm: ",t),this.chartoption.title.text=t.title,this.chartoption.series[0].data=t.data,this.chart.setOption(this.chartoption),this.getPictureData(t)}}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=o.a.init(this.$el,"macarons"),this.chart.setOption(this.chartoption)},getPictureData:function(t){}}},f=u,p=(i("6f39"),i("2877")),m=Object(p["a"])(f,r,l,!1,null,"63b5acb8",null),b=m.exports,v=i("d96b"),g={name:"Dashboard",components:{RingChart:b,PaiChan:function(){return i.e("chunk-0147a08f").then(i.bind(null,"a505"))},InventoryTable:function(){return i.e("chunk-9681610c").then(i.bind(null,"1b9c"))},Plan:function(){return i.e("chunk-2d0b95d4").then(i.bind(null,"3342"))}},data:function(){return{chartdatalist:[],initialCount:0,processlist:["切割","验焊","折弯","组装","焊接","镀锌","喷涂","攻牙","打磨","包装"],currentTime:(new Date).toLocaleTimeString(),timer:null,drawTiming:""}},mounted:function(){var t=this;this.$nextTick((function(){t.setDataBackend()})),this.timer=setInterval((function(){t.setDataBackend()}),1e3),this.timer=setInterval((function(){t.setDataBackend()}),6e5)},beforeDestroy:function(){this.timer&&clearInterval(this.timer)},methods:{drawTimingFn:function(){this.setDataBackend()},setDataBackend:function(){var t=this,e={action:"complex_view",subaction:"get_processname_info"};this.initialCount>=5||(Object(v["a"])(e).then((function(e){console.log(e.data),t.chartdatalist=[];var i,n=Object(s["a"])(e.data);try{for(n.s();!(i=n.n()).done;){var a=i.value,r=a["process_name"];-1!==t.processlist.indexOf(r)&&t.chartdatalist.push({tick:Date.now(),title:r,finished_count:a["finished_count"],total_count:a["total_count"],data:[{value:a["finished_count"],name:"已完成"},{value:a["total_count"]-a["finished_count"],name:"未完成"}]})}}catch(l){n.e(l)}finally{n.f()}console.log(t.chartdatalist)})),this.initialCount+=1)}}},_=g,y=(i("059e"),Object(p["a"])(_,n,a,!1,null,"3dc9d170",null));e["default"]=y.exports},"9a0d":function(t,e,i){},d96b:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:t})}},f794:function(t,e,i){}}]);