(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-280cb55f"],{7341:function(t,e,i){"use strict";i("c8d2c")},9406:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dashboard-editor-container"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("div",{staticClass:"title-panel"},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("出货计划")])]),i("Plan")],1),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"title-panel",staticStyle:{"margin-bottom":"20px"}},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("库存列表")])]),i("InventoryTable")],1),i("el-col",{attrs:{span:8}},[i("div",{staticClass:"title-panel"},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("生产进度看板")])]),i("el-row",t._l(t.chartdatalist,(function(e){return i("el-col",{key:e.title,staticStyle:{"margin-left":"20px"},attrs:{span:4}},[i("ring-chart",{attrs:{"chart-data":e}}),i("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-tag",[t._v("订单总数："+t._s(e.total_count))])],1),i("el-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[i("el-tag",[t._v("已完成数："+t._s(e.finished_count))])],1)],1)})),1)],1)],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{staticStyle:{height:"380px"},attrs:{span:24}},[i("div",{staticClass:"title-panel",staticStyle:{"margin-bottom":"20px"}},[i("span",{staticStyle:{"margin-left":"20px"}},[t._v("排产图")])]),i("PaiChan")],1)],1)],1)},a=[],s=i("b85c"),r=(i("d3b7"),i("3ca3"),i("ddb0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{width:t.width,height:t.height}},[i("div",{class:t.className,style:{height:t.height,width:t.width}})])}),c=[],o=i("313e"),l=i.n(o),d=i("ed08"),h={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(d["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};i("817d");var u={mixins:[h],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"130px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null,chartoption:{color:["#409EFF","#C0C4CC"],title:{text:"切割",left:"center",textStyle:{color:"#333",fontSize:16},top:"43%"},tooltip:{show:!1},legend:{show:!1},series:[{name:"",type:"pie",radius:["60%","80%"],label:{show:!1},labelLine:{show:!1},data:[]}]}}},watch:{chartData:{deep:!0,handler:function(t){this.chartoption.title.text=t.title,this.chartoption.series[0].data=t.data,this.chart.setOption(this.chartoption),this.getPictureData(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=l.a.init(this.$el,"macarons"),this.chart.setOption(this.chartoption)},getPictureData:function(t){}}},f=u,p=(i("e267"),i("2877")),b=Object(p["a"])(f,r,c,!1,null,"7a243e4b",null),m=b.exports,v=i("d96b"),_={name:"Dashboard",components:{RingChart:m,PaiChan:function(){return i.e("chunk-53dea39a").then(i.bind(null,"a505"))},InventoryTable:function(){return i.e("chunk-2d0b5e51").then(i.bind(null,"1b9c"))},Plan:function(){return i.e("chunk-2d0b95d4").then(i.bind(null,"3342"))}},data:function(){return{chartdatalist:[],initialCount:0,processlist:["切割","验焊","折弯","组装","焊接","镀锌","喷涂","攻牙","打磨","包装"]}},mounted:function(){this.drawTimingFn()},methods:{drawTimingFn:function(){var t=this;this.setDataBackend(),this.drawTiming=setInterval((function(){t.setDataBackend()}),1e3)},setDataBackend:function(){var t=this,e={action:"complex_view",subaction:"get_processname_info"};this.initialCount>=5||(Object(v["a"])(e).then((function(e){t.chartdatalist=[];var i,n=Object(s["a"])(e.data);try{for(n.s();!(i=n.n()).done;){var a=i.value,r=a["process_name"];-1!==t.processlist.indexOf(r)&&t.chartdatalist.push({tick:Date.now(),title:r,finished_count:a["finished_count"],total_count:a["total_count"],data:[{value:a["finished_count"],name:"已完成"},{value:a["total_count"]-a["finished_count"],name:"未完成"}]})}}catch(c){n.e(c)}finally{n.f()}})),this.initialCount+=1)}}},y=_,g=(i("7341"),Object(p["a"])(y,n,a,!1,null,"879af2f6",null));e["default"]=g.exports},c8d2c:function(t,e,i){},d96b:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return s}));var n=i("b775");function a(t){return Object(n["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:t})}},e267:function(t,e,i){"use strict";i("f40a")},f40a:function(t,e,i){}}]);