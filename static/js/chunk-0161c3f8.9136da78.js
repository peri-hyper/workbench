(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0161c3f8"],{"89c4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("vxe-grid",e._b({ref:"xGrid",scopedSlots:e._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:e.searchFormData},on:{submit:e.searchEvent,reset:e.resetEvent}},[a("vxe-form-item",{attrs:{title:"客户名称",span:5},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.searchFormData.customer_name,callback:function(t){e.$set(e.searchFormData,"customer_name",t)},expression:"searchFormData.customer_name"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"项目查询",span:4},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择",options:e.selectoptions.project_name_options,clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.searchFormData.project_name,callback:function(t){e.$set(e.searchFormData,"project_name",t)},expression:"searchFormData.project_name"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"日期查询",span:8},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",shortcuts:e.shortcuts,size:e.size},on:{clear:e.WhenClear},model:{value:e.searchFormData.delivery_date__range,callback:function(t){e.$set(e.searchFormData,"delivery_date__range",t)},expression:"searchFormData.delivery_date__range"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{span:4,"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"toolbar_buttons",fn:function(){return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.addRow()}}},[e._v("添加发货单")])]},proxy:!0},{key:"operation",fn:function(t){var i=t.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.editRow(i)}}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.deleteRow(i)}}},[e._v("删除")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.downloadRow(i)}}},[e._v("下载PDF")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.downloadRowExcel(i)}}},[e._v("下载Excel")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptions,!1)),a("vxe-modal",{attrs:{title:"请选择打印模板",width:"900",resize:"","destroy-on-close":""},model:{value:e.modalDisplayPrint,callback:function(t){e.modalDisplayPrint=t},expression:"modalDisplayPrint"}},[a("el-form",{staticClass:"form",attrs:{"label-width":"100px"}},[a("el-row",{staticStyle:{width:"96%"},attrs:{xs:24}},[a("el-radio-group",{on:{input:e.handleRadioChange},model:{value:e.selectedOption.file_type_s,callback:function(t){e.$set(e.selectedOption,"file_type_s",t)},expression:"selectedOption.file_type_s"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 1.jpg",src:"192.168.1.223:8000/static/template 1.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 1.jpg")}}}),a("el-radio",{attrs:{label:"1"}},[e._v("类型1")])],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 2.jpg",src:"192.168.1.223:8000/static/template 2.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 2.jpg")}}}),a("el-radio",{attrs:{label:"2"}},[e._v("类型2")])],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 3.jpg",src:"192.168.1.223:8000/static/template 3.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 3.jpg")}}}),a("el-radio",{attrs:{label:"3"}},[e._v("类型3")])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 4.jpg",src:"192.168.1.223:8000/static/template 4.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 4.jpg")}}}),a("el-radio",{attrs:{label:"4"}},[e._v("类型4")])],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 5.jpg",src:"192.168.1.223:8000/static/template 5.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 5.jpg")}}}),a("el-radio",{attrs:{label:"5"}},[e._v("类型5")])],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-image",{attrs:{href:"192.168.1.223:8000/static/template 6.jpg",src:"192.168.1.223:8000/static/template 6.jpg"},on:{click:function(t){return e.EnlargePicture("192.168.1.223:8000/static/template 6.jpg")}}}),a("el-radio",{attrs:{label:"6"}},[e._v("类型6")])],1)],1)],1)],1)],1),a("el-row",{staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplayPrint=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:e.EnterDownloadRow}},[e._v("下载")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imageUrl,alt:"预览图片"}})]),a("vxe-modal",{attrs:{title:e.上传回单,width:"390",resize:"","destroy-on-close":""},model:{value:e.modalUploadDisplay,callback:function(t){e.modalUploadDisplay=t},expression:"modalUploadDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"80"}},[a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:function(t){e.modalUploadDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:e.manualUpload}},[e._v("上传附件")])],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!0,action:"http://192.168.1.223:8000/vue-element-admin/backend/upload_file/?extra_data=upload_pdf",data:e.uploadData,"on-success":e.handleSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("vxe-modal",{attrs:{title:"新增",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalDisplay,callback:function(t){e.modalDisplay=t},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalForm.project_name_id,callback:function(t){e.$set(e.modalForm,"project_name_id",t)},expression:"modalForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:e.modalForm.driver_name_id,callback:function(t){e.$set(e.modalForm,"driver_name_id",t)},expression:"modalForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalForm.username_id,callback:function(t){e.$set(e.modalForm,"username_id",t)},expression:"modalForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalForm.customer_name_id,callback:function(t){e.$set(e.modalForm,"customer_name_id",t)},expression:"modalForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.delivery_date,callback:function(t){e.$set(e.modalForm,"delivery_date",t)},expression:"modalForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalEditDisplay,callback:function(t){e.modalEditDisplay=t},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.project_name_id,callback:function(t){e.$set(e.modalEditForm,"project_name_id",t)},expression:"modalEditForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.driver_name_id,callback:function(t){e.$set(e.modalEditForm,"driver_name_id",t)},expression:"modalEditForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalEditForm.username_id,callback:function(t){e.$set(e.modalEditForm,"username_id",t)},expression:"modalEditForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.customer_name_id,callback:function(t){e.$set(e.modalEditForm,"customer_name_id",t)},expression:"modalEditForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.delivery_date,callback:function(t){e.$set(e.modalEditForm,"delivery_date",t)},expression:"modalEditForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalEditDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1)],1)},o=[],l=a("5530"),n=(a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("a388")),r=a("d96b"),s=a("2f62"),c={computed:Object(l["a"])({},Object(s["b"])(["sidebar","avatar","device","name"])),data:function(){var e=this;return{uploadData:{file_type:"已签收发货单"},modalUploadDisplay:!1,imageUrl:"",dialogVisible:!1,shippingid:[],selectedOption:{},selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalDisplayPrint:!1,modalEditForm:{},searchFormData:{username:"admin"},gridOptions:{resizable:!0,showOverflow:!0,border:"inner",rowId:"id",rowConfig:{isHover:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:20,pageSizes:[20,50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page;t.sorts,t.filters;e.searchFormData.username=e.name;var i={action:"shipping_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.searchFormData};return Object(r["a"])(i)}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号",width:"50px"},{field:"customer_name_id",title:"客户名",width:"300px",sortable:!0},{field:"shippingid",title:"发货单编号",sortable:!0},{field:"shipping_address",title:"送货地址",sortable:!0},{field:"driver_name_id",title:"司机姓名"},{field:"username_id",title:"发货人",sortable:!0},{field:"delivery_date",title:"出货日期",sortable:!0},{title:"操作",showOverflow:!0,width:"380px",fixed:"right",slots:{default:"operation"}}]}}},created:function(){},mounted:function(){this.getOptions(),this.$refs.radio.$children.forEach((function(e){e.$refs.radio.removeAttribute("aria-hidden")}))},methods:{handleSuccess:function(e,t,a){console.log(e),n["VXETable"].modal.message({content:"上传成功",status:"success"})},manualUpload:function(){var e=this;this.afterUpload().then((function(){e.modalUploadDisplay=!1,e.uploadData={}}))},uploadPDF:function(){this.modalUploadDisplay=!0},EnlargePicture:function(e){this.dialogVisible=!0,this.imageUrl=e,console.log(this.imageUrl)},handleClose:function(){this.dialogVisible=!1},handleRadioChange:function(e){console.log(e),console.log(this.selectedOption.file_type_s)},CallPrint:function(){this.modalDisplayPrint=!0},WhenClear:function(){this.searchFormData={}},getOptions:function(){var e=this,t={action:"shipping_table_view",subaction:"getOptions"};Object(r["a"])(t).then((function(t){console.log(t.data),e.selectoptions=t.data}))},addRow:function(){var e=Math.floor(Date.now())%1e8;this.$router.push({path:"/erpshipping/shipping_add",query:{shippingid:e}})},modalSubmitEvent:function(){var e=this,t={action:"shipping_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(r["a"])(t).then((function(t){e.modalDisplay=!1,n["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=t.$refs.xGrid.$data["tableData"];for(var i in a)e.id===a[i].id&&a.splice(i,1);var o={action:"shipping_table_view",subaction:"deleteRecord",idmap:{shippingid:e.shippingid}};Object(r["a"])(o).then((function(e){n["VXETable"].modal.message({content:"删除成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))}))},editRow:function(e){this.$router.push({path:"/erpshipping/shipping_edit",query:{shippingid:e.shippingid}})},downloadRow:function(e){console.log(e.shippingid),this.shippingid=e.shippingid,console.log(this.shippingid),this.modalDisplayPrint=!0},EnterDownloadRow:function(){0!==this.selectedOption.file_type_s.length?(this.getPdfFile(),this.modalDisplayPrint=!1):n["VXETable"].modal.message({content:"请选择送货单模板",status:"warning"})},getPdfFile:function(){var e=this,t={action:"shipping_table_view",subaction:"downloadRecord",shippingid:this.shippingid,file_type:this.selectedOption.file_type_s};Object(r["a"])(t).then((function(t){var a={shippingid:e.shippingid};Object(r["b"])(a).then((function(e){console.log(e),n["VXETable"].saveFile({filename:e.headers["my_file_name_no_suffix"],type:e.headers["my_file_type"],content:e.data})}))}))},downloadRowExcel:function(e){var t={action:"shipping_table_view",subaction:"downloadExcel",shippingid:e.shippingid};Object(r["a"])(t).then((function(t){console.log(t);var a={shippingid_excel:e.shippingid};Object(r["b"])(a).then((function(e){console.log(e),n["VXETable"].saveFile({filename:e.headers["my_file_name_no_suffix"],type:e.headers["my_file_type"],content:e.data})}))})).catch((function(e){console.error("Error in downloadFile:",e)})).catch((function(e){console.error("Error in downloadFile:",e)}))},modalEditSubmitEvent:function(){var e=this,t={action:"shipping_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{shippingid:this.modalEditForm.shippingid}};Object(r["a"])(t).then((function(t){e.modalEditDisplay=!1,n["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},resetEvent:function(){this.searchFormData={},this.$refs.xGrid.commitProxy("reload")}}},d=c,p=a("2877"),m=Object(p["a"])(d,i,o,!1,null,null,null);t["default"]=m.exports},d96b:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var i=a("b775");function o(e){return Object(i["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:e})}}}]);