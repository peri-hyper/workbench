(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-741df4fe"],{"4b86":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("vxe-modal",{attrs:{title:e.uploadTitle,width:"390",resize:"","destroy-on-close":""},model:{value:e.modalUploadDisplay,callback:function(t){e.modalUploadDisplay=t},expression:"modalUploadDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"80"}},[a("vxe-form-item",{attrs:{title:"文件类型",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择文件类型"},model:{value:e.uploadData.file_type,callback:function(t){e.$set(e.uploadData,"file_type",t)},expression:"uploadData.file_type"}},[a("vxe-option",{attrs:{value:"1",label:"合同/订单"}}),a("vxe-option",{attrs:{value:"2",label:"图纸"}}),a("vxe-option",{attrs:{value:"3",label:"已签收发货单"}}),a("vxe-option",{attrs:{value:"4",label:"验焊报告"}}),a("vxe-option",{attrs:{value:"5",label:"质检报告"}}),a("vxe-option",{attrs:{value:"6",label:"镀锌报告"}}),a("vxe-option",{attrs:{value:"7",label:"其他"}})],1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:function(t){e.modalUploadDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:e.manualUpload}},[e._v("上传附件")])],1)],1),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"","auto-upload":!1,action:"http://192.168.1.223:8000/vue-element-admin/backend/upload_file/",data:e.uploadData,"on-success":e.handleSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("vxe-grid",e._b({ref:"xGrid",scopedSlots:e._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:e.ordersearchFormData},on:{submit:e.searchEvent,reset:e.resetEvent}},[a("vxe-form-item",{attrs:{title:"全局搜索"},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-input",{attrs:{placeholder:"请输入",clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.ordersearchFormData.search_data,callback:function(t){e.$set(e.ordersearchFormData,"search_data",t)},expression:"ordersearchFormData.search_data"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.ordersearchFormData.order_status,callback:function(t){e.$set(e.ordersearchFormData,"order_status",t)},expression:"ordersearchFormData.order_status"}},e._l(e.order_status_options,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"toolbar_buttons",fn:function(){return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.addRow()}}},[e._v("新增")])]},proxy:!0},{key:"operation1",fn:function(t){var o=t.row;return[a("span",{domProps:{innerHTML:e._s(e.renderAOGStatus(o.order_status_label))}})]}},{key:"operation",fn:function(t){var o=t.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.editRow(o)}}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.deleteRow(o)}}},[e._v("删除")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.uploadFileRow(o)}}},[e._v("上传附件")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.queryFileRow(o)}}},[e._v("查看附件")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.queryDetailRow(o)}}},[e._v("订单详情")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptions,!1)),a("vxe-modal",{attrs:{title:"附件列表",width:"900",resize:"","destroy-on-close":""},model:{value:e.FileListModalView,callback:function(t){e.FileListModalView=t},expression:"FileListModalView"}},[a("h3",[e._v("订单号码："+e._s(e.file_order_number))]),a("vxe-grid",e._b({ref:"xGridExtra",scopedSlots:e._u([{key:"operation",fn:function(t){var o=t.row;return[a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.deleteFileRow(o)}}},[e._v("删除")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.downloadFileRow(o)}}},[e._v("下载")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptionsExtra,!1))],1),a("vxe-modal",{attrs:{title:"新增",width:"560",resize:"","destroy-on-close":""},model:{value:e.modalDisplay,callback:function(t){e.modalDisplay=t},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"订单号码",span:24}},[a("vxe-input",{model:{value:e.modalForm.order_number,callback:function(t){e.$set(e.modalForm,"order_number",t)},expression:"modalForm.order_number"}})],1),a("vxe-form-item",{attrs:{title:"客户名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalForm.customer_name_id,callback:function(t){e.$set(e.modalForm,"customer_name_id",t)},expression:"modalForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalForm.project_name,callback:function(t){e.$set(e.modalForm,"project_name",t)},expression:"modalForm.project_name"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"订单日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.order_date,callback:function(t){e.$set(e.modalForm,"order_date",t)},expression:"modalForm.order_date"}})],1),a("vxe-form-item",{attrs:{title:"开始生产日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.manufacture_date,callback:function(t){e.$set(e.modalForm,"manufacture_date",t)},expression:"modalForm.manufacture_date"}})],1),a("vxe-form-item",{attrs:{title:"预出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.delivery_date,callback:function(t){e.$set(e.modalForm,"delivery_date",t)},expression:"modalForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{title:"订单内容",span:24}},[a("vxe-input",{model:{value:e.modalForm.order_details,callback:function(t){e.$set(e.modalForm,"order_details",t)},expression:"modalForm.order_details"}})],1),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalForm.remarks,callback:function(t){e.$set(e.modalForm,"remarks",t)},expression:"modalForm.remarks"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"600",resize:"","destroy-on-close":""},model:{value:e.modalEditDisplay,callback:function(t){e.modalEditDisplay=t},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"订单号码",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.order_number,callback:function(t){e.$set(e.modalEditForm,"order_number",t)},expression:"modalEditForm.order_number"}})],1),a("vxe-form-item",{attrs:{title:"客户名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.customer_name_id,callback:function(t){e.$set(e.modalEditForm,"customer_name_id",t)},expression:"modalEditForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.project_name,callback:function(t){e.$set(e.modalEditForm,"project_name",t)},expression:"modalEditForm.project_name"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"订单日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.order_date,callback:function(t){e.$set(e.modalEditForm,"order_date",t)},expression:"modalEditForm.order_date"}})],1),a("vxe-form-item",{attrs:{title:"开始生产日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.manufacture_date,callback:function(t){e.$set(e.modalEditForm,"manufacture_date",t)},expression:"modalEditForm.manufacture_date"}})],1),a("vxe-form-item",{attrs:{title:"预出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.delivery_date,callback:function(t){e.$set(e.modalEditForm,"delivery_date",t)},expression:"modalEditForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{title:"上单日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.invoice_date,callback:function(t){e.$set(e.modalEditForm,"invoice_date",t)},expression:"modalEditForm.invoice_date"}})],1),a("vxe-form-item",{attrs:{title:"订单内容",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.order_details,callback:function(t){e.$set(e.modalEditForm,"order_details",t)},expression:"modalEditForm.order_details"}})],1),a("vxe-form-item",{attrs:{title:"订单状态",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.modalEditForm.order_status,callback:function(t){e.$set(e.modalEditForm,"order_status",t)},expression:"modalEditForm.order_status"}},e._l(e.order_status_options2,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.remarks,callback:function(t){e.$set(e.modalEditForm,"remarks",t)},expression:"modalEditForm.remarks"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalEditDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1)],1)},r=[],i=a("c7eb"),l=a("1da1"),n=a("5530"),s=(a("99af"),a("a434"),a("b0c0"),a("a388")),d=a("d96b"),m=a("2f62"),u={computed:Object(n["a"])({},Object(m["b"])(["sidebar","avatar","device","name","ordersearchFormData"])),data:function(){var e=this;return{FileListModalView:!1,uploadTitle:"上传附件",modalUploadDisplay:!1,extra_order_number:"",extra_customer_name_id:"",file_order_number:"",uploadData:{},order_status_options:[{label:"待发货",value:1},{label:"已发货",value:2}],order_status_options2:[{label:"生产中",value:1},{label:"已暂停",value:0},{label:"已完成",value:2}],selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalEditForm:{},gridOptions:{resizable:!0,showOverflow:!0,height:1100,rowheight:25,border:"inner",rowId:"id",rowConfig:{isHover:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:80,pageSizes:[80,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page;t.sorts,t.filters;e.ordersearchFormData.username=e.name;var o={action:"order_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.ordersearchFormData};return Object(d["a"])(o)}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号",width:50},{field:"orderid",title:"ID",visible:!1},{field:"customer_name_id",title:"客户名称",sortable:!0,width:250},{field:"order_number",title:"订单号码",sortable:!0,width:250},{field:"project_name",title:"项目名称",sortable:!0,width:160},{field:"order_date",title:"订单日期",sortable:!0},{field:"manufacture_date",title:"开始日期"},{field:"delivery_date",title:"预出货日期"},{field:"invoice_date",title:"对账日期",visible:!1},{field:"order_status",title:"订单状态",visible:!1},{field:"order_details",title:"订单内容",sortable:!0},{title:"生产状态",showOverflow:!0,fixed:"right",slots:{default:"operation1"}},{field:"remarks",title:"备注"},{field:"username_id",title:"跟单员",sortable:!0},{title:"操作",showOverflow:!0,width:"450px",fixed:"right",slots:{default:"operation"}}]},gridOptionsExtra:{resizable:!0,showOverflow:!0,border:"inner",rowId:"id",rowConfig:{isHover:!0},data:[],columns:[{type:"seq",title:"序号"},{field:"fileid",title:"ID",visible:!1},{field:"filename",title:"文件名"},{field:"upload_time",title:"上传时间"},{field:"file_size",title:"文件大小(字节)"},{field:"file_suffix",title:"文件后缀"},{field:"file_type",title:"文件类型",visible:!1},{field:"file_type_label",title:"文件类型"},{title:"操作",showOverflow:!0,width:"160px",fixed:"right",slots:{default:"operation"}}]}}},created:function(){},mounted:function(){this.getOptions()},methods:{renderAOGStatus:function(e){var t;switch(e){case"生产中":t="#409EFF";break;case"已暂停":t="#FFA500";break;case"已完成":t="#24ff33";break;default:t="black"}return'<span style="font-weight:bold; color:'.concat(t,';">').concat(e,"</span>")},WhenClear:function(){this.ordersearchFormData={}},getOptions:function(){var e=this,t={action:"order_table_view",subaction:"getOptions"};Object(d["a"])(t).then((function(t){e.selectoptions=t.data}))},addRow:function(){this.modalForm={},this.modalDisplay=!0},modalSubmitEvent:function(){var e=this;this.modalForm.username_id=this.name;var t={action:"order_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(d["a"])(t).then((function(t){e.modalDisplay=!1,s["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=t.$refs.xGrid.$data["tableData"];for(var o in a)e.id===a[o].id&&a.splice(o,1);var r={action:"order_table_view",subaction:"deleteRecord",idmap:{order_number:e.order_number},order_number:e.order_number};Object(d["a"])(r).then((function(e){s["VXETable"].modal.message({content:"删除成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))}))},editRow:function(e){this.modalEditDisplay=!0,this.modalEditForm=e,this.modalEditForm.old_order_number=e.order_number;var t=a("2ef0");this.modalEditForm=t.cloneDeep(e),delete this.modalEditForm.id,delete this.modalEditForm.order_status_label},modalEditSubmitEvent:function(){var e=this,t={action:"order_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{orderid:this.modalEditForm.orderid}};Object(d["a"])(t).then((function(t){e.modalEditDisplay=!1,s["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},resetEvent:function(){this.ordersearchFormData={},this.$refs.xGrid.commitProxy("reload")},handleSuccess:function(e,t,a){s["VXETable"].modal.message({content:"上传成功",status:"success"})},uploadFileRow:function(e){this.modalUploadDisplay=!0,this.extra_order_number=e.order_number,this.extra_customer_name_id=e.customer_name_id,console.log(e.customer_name_id),this.uploadTitle="上传订单".concat(e.order_number,"的附件")},updateUploadData:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uploadData.order_number=e.extra_order_number,e.uploadData.customer_name_id=e.extra_customer_name_id,console.log(e.uploadData);case 3:case"end":return t.stop()}}),t)})))()},afterUpload:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateUploadData().then((function(){e.$refs.upload.submit()}));case 1:case"end":return t.stop()}}),t)})))()},manualUpload:function(){var e=this;this.uploadData.file_type?(this.afterUpload().then((function(){e.modalUploadDisplay=!1,e.uploadData={},e.getUploadFileList(e.extra_order_number)})),this.file_order_number=this.extra_order_number):s["VXETable"].modal.message({content:"请选择文件类型",status:"error"})},getUploadFileList:function(e){var t=this;this.file_order_number=this.extra_order_number;var a={action:"file_table_view",subaction:"query",pageNum:1,pageSize:1e4,searchForm:{order_number:e}};Object(d["a"])(a).then((function(e){t.gridOptionsExtra.data=e.data}))},deleteFileRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=t.gridOptionsExtra.data;for(var o in a)e.id===a[o].id&&a.splice(o,1);var r={action:"file_table_view",subaction:"deleteRecord",idmap:{fileid:e.fileid}};Object(d["a"])(r).then((function(e){s["VXETable"].modal.message({content:"删除成功",status:"success"})}))}))},queryFileRow:function(e){this.FileListModalView=!0,this.extra_order_number=e.order_number,this.getUploadFileList(e.order_number)},downloadFileRow:function(e){var t={fileid:e.fileid};Object(d["b"])(t).then((function(e){s["VXETable"].saveFile({filename:e.headers["my_file_name_no_suffix"],type:e.headers["my_file_type"],content:e.data})}))},queryDetailRow:function(e){this.$router.push({path:"/erporder/order_detail_table_view",query:{order_number:e.order_number,customer_name_id:e.customer_name_id,username:this.name}})}}},c=u,p=a("2877"),f=Object(p["a"])(c,o,r,!1,null,null,null);t["default"]=f.exports},d96b:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var o=a("b775");function r(e){return Object(o["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:e})}}}]);