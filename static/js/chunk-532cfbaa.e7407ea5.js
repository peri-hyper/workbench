(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-532cfbaa"],{"4e82":function(e,t,a){"use strict";var i=a("23e7"),r=a("1c0b"),o=a("7b0b"),n=a("d039"),l=a("a640"),s=[],c=s.sort,u=n((function(){s.sort(void 0)})),d=n((function(){s.sort(null)})),m=l("sort"),p=u||!d||!m;i({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?c.call(o(this)):c.call(o(this),r(e))}})},"56f4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("h3",[e._v(" 选择产品 ")]),a("el-tabs",{staticStyle:{"margin-top":"20px"},attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"库存列表"}},[a("vxe-grid",e._b({ref:"xGrid",attrs:{size:"small","checkbox-config":{checkField:"isChecked",highlight:!0,range:!0}},on:{"checkbox-change":e.handleCheckboxChange,"checkbox-range-end":e.handleCheckboxRangeChange,"checkbox-all":e.handleCheckAll},scopedSlots:e._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:e.searchFormData},on:{submit:e.searchEvent,reset:e.resetEvent}},[a("vxe-form-item",{attrs:{field:"product_name__icontains",title:"产品名称","item-render":{name:"input",attrs:{placeholder:""}}}}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"operation",fn:function(t){var i=t.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.editRow(i)}}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.deleteRow(i)}}},[e._v("删除")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptions,!1))],1),a("el-tab-pane",{attrs:{label:"产品列表"}},[a("vxe-grid",e._b({ref:"xGridProduct",attrs:{size:"small","checkbox-config":{checkField:"isChecked",highlight:!0,range:!0}},on:{"checkbox-change":e.handleCheckboxChangeProduct,"checkbox-range-end":e.handleCheckboxRangeChangePrdouct,"checkbox-all":e.handleCheckAll2},scopedSlots:e._u([{key:"search_buttons_product",fn:function(){return[a("vxe-form",{attrs:{data:e.searchFormDataProduct},on:{submit:e.searchEventProduct,reset:e.resetEventProduct}},[a("vxe-form-item",{attrs:{field:"commodity_details__icontains",title:"产品名称","item-render":{name:"input",attrs:{placeholder:""}}}}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptionsProduct,!1))],1)],1),a("vxe-modal",{attrs:{title:"新增",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalDisplay,callback:function(t){e.modalDisplay=t},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"产品名称",span:24}},[a("vxe-input",{model:{value:e.modalForm.product_name,callback:function(t){e.$set(e.modalForm,"product_name",t)},expression:"modalForm.product_name"}})],1),a("vxe-form-item",{attrs:{title:"产品规格",span:24}},[a("vxe-input",{model:{value:e.modalForm.product_size,callback:function(t){e.$set(e.modalForm,"product_size",t)},expression:"modalForm.product_size"}})],1),a("vxe-form-item",{attrs:{title:"单位",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.modalForm.unit,callback:function(t){e.$set(e.modalForm,"unit",t)},expression:"modalForm.unit"}},e._l(e.unit_options,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"数量",span:24}},[a("vxe-input",{model:{value:e.modalForm.quantity,callback:function(t){e.$set(e.modalForm,"quantity",t)},expression:"modalForm.quantity"}})],1),a("vxe-form-item",{attrs:{title:"品牌",span:24}},[a("vxe-input",{model:{value:e.modalForm.brand,callback:function(t){e.$set(e.modalForm,"brand",t)},expression:"modalForm.brand"}})],1),a("vxe-form-item",{attrs:{title:"材质",span:24}},[a("vxe-input",{model:{value:e.modalForm.material_certificate,callback:function(t){e.$set(e.modalForm,"material_certificate",t)},expression:"modalForm.material_certificate"}})],1),a("vxe-form-item",{attrs:{title:"类型",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.modalForm.material_type,callback:function(t){e.$set(e.modalForm,"material_type",t)},expression:"modalForm.material_type"}},e._l(e.material_type_options,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalForm.remark,callback:function(t){e.$set(e.modalForm,"remark",t)},expression:"modalForm.remark"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalEditDisplay,callback:function(t){e.modalEditDisplay=t},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"产品名称",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.product_name,callback:function(t){e.$set(e.modalEditForm,"product_name",t)},expression:"modalEditForm.product_name"}})],1),a("vxe-form-item",{attrs:{title:"产品规格",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.product_size,callback:function(t){e.$set(e.modalEditForm,"product_size",t)},expression:"modalEditForm.product_size"}})],1),a("vxe-form-item",{attrs:{title:"单位",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.modalEditForm.unit,callback:function(t){e.$set(e.modalEditForm,"unit",t)},expression:"modalEditForm.unit"}},e._l(e.unit_options,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"数量",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.quantity,callback:function(t){e.$set(e.modalEditForm,"quantity",t)},expression:"modalEditForm.quantity"}})],1),a("vxe-form-item",{attrs:{title:"品牌",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.brand,callback:function(t){e.$set(e.modalEditForm,"brand",t)},expression:"modalEditForm.brand"}})],1),a("vxe-form-item",{attrs:{title:"材质",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.material_certificate,callback:function(t){e.$set(e.modalEditForm,"material_certificate",t)},expression:"modalEditForm.material_certificate"}})],1),a("vxe-form-item",{attrs:{title:"类型",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择"},model:{value:e.modalEditForm.material_type,callback:function(t){e.$set(e.modalEditForm,"material_type",t)},expression:"modalEditForm.material_type"}},e._l(e.material_type_options,(function(e,t){return a("vxe-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.remark,callback:function(t){e.$set(e.modalEditForm,"remark",t)},expression:"modalEditForm.remark"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalEditDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("h3",[e._v(" 申请采购 ")]),a("vxe-toolbar",{ref:"xToolbar",scopedSlots:e._u([{key:"buttons",fn:function(){return[a("vxe-button",{attrs:{status:"primary",content:"新增"},on:{click:e.insertEvent}}),a("vxe-button",{attrs:{status:"primary",content:"申请采购"},on:{click:e.generatePurchase}})]},proxy:!0}])}),a("vxe-table",{ref:"xTable",attrs:{border:"",resizable:"","show-overflow":"","keep-source":"","keyboard-config":{isEdit:!0,isArrow:!0,isEnter:!0,isTab:!0,isDel:!0,isBack:!0},"mouse-config":{selected:!0},data:e.purchaseTableData,"edit-config":{trigger:"click",mode:"cell",showUpdateStatus:!0,showInsertStatus:!0}},on:{"edit-closed":e.handleEditClosed,select:e.handleCellClicked}},[a("vxe-column",{attrs:{type:"seq",width:"60",title:"序号"}}),a("vxe-column",{attrs:{field:"product_name",title:"名称","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},model:{value:i.product_name,callback:function(t){e.$set(i,"product_name",t)},expression:"row.product_name"}})]}}])}),a("vxe-column",{attrs:{field:"product_size",title:"规格","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},model:{value:i.product_size,callback:function(t){e.$set(i,"product_size",t)},expression:"row.product_size"}})]}}])}),a("vxe-column",{attrs:{field:"unit_label",title:"单位","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},model:{value:i.unit_label,callback:function(t){e.$set(i,"unit_label",t)},expression:"row.unit_label"}})]}}])}),a("vxe-column",{attrs:{field:"quantity",title:"数量","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},on:{focus:function(t){return e.ClearRow2(i)}},model:{value:i.quantity,callback:function(t){e.$set(i,"quantity",t)},expression:"row.quantity"}})]}}])}),a("vxe-column",{attrs:{field:"unit_price",title:"单价","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},on:{focus:function(t){return e.ClearRow(i)}},model:{value:i.unit_price,callback:function(t){e.$set(i,"unit_price",t)},expression:"row.unit_price"}})]}}])}),a("vxe-column",{attrs:{field:"total_prices",title:"总价","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},on:{change:function(t){return e.ConstTotal(i)}},model:{value:i.total_prices,callback:function(t){e.$set(i,"total_prices",t)},expression:"row.total_prices"}})]}}])}),a("vxe-column",{attrs:{field:"remark",title:"备注","edit-render":{autofocus:".vxe-input--inner",defaultValue:"0"}},scopedSlots:e._u([{key:"edit",fn:function(t){var i=t.row;return[a("vxe-input",{attrs:{type:"text"},model:{value:i.remark,callback:function(t){e.$set(i,"remark",t)},expression:"row.remark"}})]}}])}),a("vxe-column",{attrs:{title:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("vxe-button",{attrs:{status:"danger",content:"删除"},on:{click:function(t){return e.removeRowEvent(i)}}})]}}])})],1)],1)},r=[],o=a("c7eb"),n=a("1da1"),l=a("2909"),s=a("b85c"),c=a("5530"),u=(a("99af"),a("7db0"),a("c740"),a("d81d"),a("4e82"),a("a434"),a("b0c0"),a("d3b7"),a("159b"),a("a388")),d=a("d96b"),m=a("2f62"),p={computed:Object(c["a"])({},Object(m["b"])(["name"])),data:function(){var e=this;return{modalFormIn:{purchase_date:""},purchaseTableData:[],unit_options:[{label:"件",value:"1"},{label:"套",value:"2"},{label:"批",value:"3"},{label:"千克",value:"4"},{label:"吨",value:"5"},{label:"包",value:"6"},{label:"盒",value:"7"},{label:"其他",value:"8"}],material_type_options:[{label:"原材料",value:"1"},{label:"焊材",value:"2"},{label:"耗材",value:"3"},{label:"工具",value:"4"},{label:"配件",value:"5"},{label:"螺丝",value:"6"},{label:"钻铣",value:"7"}],selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalEditForm:{},row_id:1,searchFormData:{},searchFormDataProduct:{},gridOptionsProduct:{data:[],resizable:!0,showOverflow:!0,height:500,border:"inner",rowConfig:{keyField:"inventoryid",isHover:!0},checkboxConfig:{reserve:!0,labelField:["order_number"],highlight:!0,range:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:100,pageSizes:[50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page;t.sorts,t.filters;e.searchFormDataProduct.username=e.name;var i={action:"product_list_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.searchFormDataProduct};return Object(d["a"])(i).then((function(t){var a=t.data||[],i=a.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{isChecked:!1})})),r=e.purchaseTableData;console.log(e.purchaseTableData);var o,n=Object(s["a"])(r);try{var l=function(){var e=o.value,t=i.findIndex((function(t){return t.detailid===e.detailid}));!0===e.isChecked&&-1!==t&&(i[t].isChecked=!0)};for(n.s();!(o=n.n()).done;)l()}catch(u){n.e(u)}finally{n.f()}return{data:i,total:t.total}}))}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons_product"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号",width:80},{type:"checkbox",title:"选择",width:80},{field:"detailid",title:"ID",visible:!1},{field:"order_number_id",title:"订单号码"},{field:"project_name",title:"项目名称"},{field:"customer_name",title:"客户名称",visible:!1},{field:"commodity_details",title:"品名"},{field:"commodity_size",title:"规格"},{field:"control_no",title:"编号"},{field:"commodity_units",title:"单位"},{field:"commodity_quantity",title:"产品数量"},{field:"unit_weight",title:"单件重量"},{field:"commodity_weight",title:"重量"},{field:"remarks",title:"备注"}]},gridOptions:{tableData:[],resizable:!0,showOverflow:!0,height:500,border:"inner",rowConfig:{keyField:"inventoryid",isHover:!0},checkboxConfig:{reserve:!0,labelField:["order_number"],highlight:!0,range:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:100,pageSizes:[50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page,i=(t.sorts,t.filters,{action:"inventory_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.searchFormData});return Object(d["a"])(i).then((function(t){var a=t.data||[],i=a.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{isChecked:!1})})),r=e.purchaseTableData;console.log(e.purchaseTableData);var o,n=Object(s["a"])(r);try{var l=function(){var e=o.value,t=i.findIndex((function(t){return t.inventoryid===e.inventoryid}));!0===e.isChecked&&-1!==t&&(i[t].isChecked=!0)};for(n.s();!(o=n.n()).done;)l()}catch(u){n.e(u)}finally{n.f()}return{data:i,total:t.total}}))}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号"},{type:"checkbox",title:"选择"},{field:"inventoryid",title:"库存ID",visible:!1},{field:"product_name",title:"产品名称"},{field:"product_size",title:"产品规格"},{field:"unit",title:"单位"},{field:"unit_label",title:"单位"},{field:"quantity",title:"数量"},{field:"brand",title:"品牌"},{field:"material_certificate",title:"材质"},{field:"material_type",title:"类型",visible:!1},{field:"material_type_label",title:"类型"},{field:"remark",title:"备注"}]}}},created:function(){},mounted:function(){this.getOptions()},methods:{handleCellClicked:function(e){var t=e.row,a=e.column;this.$refs.xTable.triggerEdit(t,a)},handleCheckAll:function(e){var t,a=this,i=(e.checked,this.$refs.xGrid.getTableData().fullData),r=[],o=[];i.forEach((function(e,t){var i=a.purchaseTableData.findIndex((function(t){return t.inventoryid===e.inventoryid}));if(o.push(i),!0===e.isChecked){var n={inventoryid:e.inventoryid,isChecked:e.isChecked,product_name:e.product_name,product_size:e.product_size,unit_label:e.unit_label,quantity:0,unit_price:0,total_prices:0};r.push(n)}})),(t=this.purchaseTableData).push.apply(t,r),o.sort((function(e,t){return t-e})).forEach((function(e){-1!==e&&a.purchaseTableData.splice(e,1)}))},handleCheckAll2:function(){var e,t=this,a=this.$refs.xGridProduct.getTableData().fullData,i=[],r=[];a.forEach((function(e,a){var o=t.purchaseTableData.findIndex((function(t){return t.detailid===e.detailid}));r.push(o);var n=e.remarks;if("鈴木鐵閘(香港)有限公司"===e.customer_name&&(n=e.project_name),!0===e.isChecked){var l={detailid:e.detailid,isChecked:e.isChecked,product_name:e.commodity_details,product_size:e.control_no+" : "+e.commodity_size,unit_label:e.commodity_units,quantity:0,unit_price:0,total_prices:0,remark:n};i.push(l)}})),(e=this.purchaseTableData).push.apply(e,i),r.sort((function(e,t){return t-e})).forEach((function(e){-1!==e&&t.purchaseTableData.splice(e,1)}))},ConstTotal:function(e){e.total_prices=e.unit_price*e.quantity},ClearRow:function(e){0===e.unit_price&&(e.unit_price="")},ClearRow2:function(e){0===e.quantity&&(e.quantity="")},onEnterUp:function(e,t,a){var i=this,r=this.purchaseTableData.indexOf(e),o=r+1;if(o<this.purchaseTableData.length)this.$nextTick((function(){var e=0;e=0===r?6+t:6+t+7*r;var a=i.$refs.xTable.$el.querySelectorAll(".vxe-cell--label")[e];a&&a.click()}));else{var n=this.$refs.xTable.$el.querySelectorAll(".vxe-cell--label")[t];console.warn(n),n&&(console.warn("找到数据"),n.click(),n.focus()),console.warn("No next row available")}},handleEditClosed:function(e){var t=e.row,a=(e.rowIndex,e.$rowIndex,e.column,e.columnIndex);e.$columnIndex;4!==a&&5!==a||(t.total_prices=t.quantity*t.unit_price)},generatePurchase:function(){var e=this,t=this.$refs.xTable,a=t.getRecordset(),i=a.insertRecords,r=[].concat(Object(l["a"])(i),Object(l["a"])(this.purchaseTableData)),o=r.map((function(t){return{product_name:t.product_name,product_size:t.product_size,unit:t.unit_label,quantity:t.quantity,unit_price:t.unit_price,total_price:t.total_prices,whether_buy:2,username_id:e.name,remarks:t.remark}})),n={action:"request_buy_table_view",subaction:"addRecordList",modalFormList:o};Object(d["a"])(n).then((function(e){u["VXETable"].modal.message({content:"提交成功",status:"success"}),t.data=[]}))},insertEvent:function(){var e=this;return Object(n["a"])(Object(o["a"])().mark((function t(){var a,i,r,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$refs.xTable,i={quantity:0,unit_price:0,total_prices:0,row_id:e.row_id},e.row_id++,e.purchaseTableData.push(i),t.next=6,a.insert(i);case 6:return r=t.sent,n=r.row,t.next=10,a.setEditRow(n);case 10:case"end":return t.stop()}}),t)})))()},removeRowEvent:function(e){var t=this;return Object(n["a"])(Object(o["a"])().mark((function a(){var i,r,n,l,s,c,u,d,m,p;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.inventoryid,r=e.detailid,n=e.row_id,console.log(t.purchaseTableData),console.log(e),i?(l=t.purchaseTableData.findIndex((function(e){return e.inventoryid===i})),t.purchaseTableData.splice(l,1),s=t.$refs.xGrid.getTableData().fullData.find((function(e){return e.inventoryid===i})),s&&(c=t.$refs.xGrid.getTableData().fullData.findIndex((function(e){return e.inventoryid===i})),t.$refs.xGrid.getTableData().fullData[c].isChecked=!1)):r?(u=t.purchaseTableData.findIndex((function(e){return e.detailid===r})),t.purchaseTableData.splice(u,1),d=t.$refs.xGridProduct.getTableData().fullData.find((function(e){return e.detailid===r})),d&&(m=t.$refs.xGridProduct.getTableData().fullData.findIndex((function(e){return e.detailid===r})),t.$refs.xGridProduct.getTableData().fullData[m].isChecked=!1)):n&&(p=t.purchaseTableData.findIndex((function(e){return e.row_id===n})),t.purchaseTableData.splice(p,1));case 6:case"end":return a.stop()}}),a)})))()},handleCheckboxChange:function(e){var t=e.row,a=e.checked;e.rowIndex;if(!0===a){var i=Object(c["a"])(Object(c["a"])({},t),{},{quantity:0,unit_price:0,total_prices:0});this.purchaseTableData.push(i)}else{var r=this.purchaseTableData.findIndex((function(e){return e.inventoryid===t.inventoryid}));this.purchaseTableData.splice(r,1)}},handleCheckboxRangeChange:function(e){var t,a=this,i=(e.$event,this.$refs.xGrid.getTableData().fullData),r=[],o=[];i.forEach((function(e,t){var i=a.purchaseTableData.findIndex((function(t){return t.inventoryid===e.inventoryid}));if(o.push(i),!0===e.isChecked){var n={inventoryid:e.inventoryid,isChecked:e.isChecked,product_name:e.product_name,product_size:e.product_size,unit_label:e.unit_label,quantity:0,unit_price:0,total_prices:0};r.push(n)}})),(t=this.purchaseTableData).push.apply(t,r),o.sort((function(e,t){return t-e})).forEach((function(e){-1!==e&&a.purchaseTableData.splice(e,1)}))},handleCheckboxRangeChangePrdouct:function(e){var t,a=this,i=(e.$event,this.$refs.xGridProduct.getTableData().fullData),r=[],o=[];i.forEach((function(e,t){var i=a.purchaseTableData.findIndex((function(t){return t.detailid===e.detailid}));o.push(i);var n=e.remarks;if("鈴木鐵閘(香港)有限公司"===e.customer_name&&(n=e.project_name),!0===e.isChecked){var l={detailid:e.detailid,isChecked:e.isChecked,product_name:e.commodity_details,product_size:e.control_no+" : "+e.commodity_size,unit_label:e.commodity_units,quantity:0,unit_price:0,total_prices:0,remark:n};r.push(l)}})),(t=this.purchaseTableData).push.apply(t,r),o.sort((function(e,t){return t-e})).forEach((function(e){-1!==e&&a.purchaseTableData.splice(e,1)}))},handleCheckboxChangeProduct:function(e){var t=e.row,a=(e.rowIndex,e.checked),i=t.remarks;if("鈴木鐵閘(香港)有限公司"===t.customer_name&&(i=t.project_name),!0===a){var r={detailid:t.detailid,isChecked:t.isChecked,product_name:t.commodity_details,product_size:t.control_no+" : "+t.commodity_size,unit_label:t.commodity_units,quantity:0,unit_price:0,total_prices:0,remark:i};this.purchaseTableData.push(r),console.log(this.purchaseTableData)}else{var o=this.purchaseTableData.findIndex((function(e){return e.detailid===t.detailid}));console.log(o),this.purchaseTableData.splice(o,1)}},getOptions:function(){var e=this,t={action:"warehous_entry_table_view",subaction:"getOptions"};Object(d["a"])(t).then((function(t){e.selectoptions=t.data}))},addRow:function(){this.modalForm={},this.modalDisplay=!0},modalSubmitEvent:function(){var e=this,t={action:"inventory_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(d["a"])(t).then((function(t){e.modalDisplay=!1,u["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=t.$refs.xGrid.$data["tableData"];for(var i in console.log(a),a)e.id===a[i].id&&a.splice(i,1);var r={action:"inventory_table_view",subaction:"deleteRecord",idmap:{inventoryid:e.inventoryid}};Object(d["a"])(r).then((function(e){u["VXETable"].modal.message({content:"删除成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))}))},editRow:function(e){this.modalEditDisplay=!0,this.modalEditForm=e;var t=a("2ef0");this.modalEditForm=t.cloneDeep(e),delete this.modalEditForm.id,delete this.modalEditForm.unit_label,delete this.modalEditForm.material_type_label},modalEditSubmitEvent:function(){var e=this,t={action:"inventory_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{inventoryid:this.modalEditForm.inventoryid}};Object(d["a"])(t).then((function(t){e.modalEditDisplay=!1,u["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},searchEventProduct:function(){this.$refs.xGridProduct.commitProxy("reload")},resetEvent:function(){this.searchFormData={},this.$refs.xGrid.commitProxy("reload")},resetEventProduct:function(){this.searchFormDataProduct={},this.$refs.xGridProduct.commitProxy("reload")}}},f=p,v=a("2877"),h=Object(v["a"])(f,i,r,!1,null,null,null);t["default"]=h.exports},"7db0":function(e,t,a){"use strict";var i=a("23e7"),r=a("b727").find,o=a("44d2"),n=a("ae40"),l="find",s=!0,c=n(l);l in[]&&Array(1)[l]((function(){s=!1})),i({target:"Array",proto:!0,forced:s||!c},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o(l)},d96b:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var i=a("b775");function r(e){return Object(i["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:e})}}}]);