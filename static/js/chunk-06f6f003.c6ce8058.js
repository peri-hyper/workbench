(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06f6f003"],{"0128":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("vxe-grid",e._b({ref:"xGrid",scopedSlots:e._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:e.searchFormData},on:{submit:e.searchEvent,reset:e.resetEvent}},[a("vxe-form-item",{attrs:{title:"供应商名称"},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择",options:e.selectoptions.supplier_name_options,clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.searchFormData.supplier_name,callback:function(t){e.$set(e.searchFormData,"supplier_name",t)},expression:"searchFormData.supplier_name"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"采购单号"},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请选择",options:e.selectoptions.purchase_number_options,clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.searchFormData.purchase_number,callback:function(t){e.$set(e.searchFormData,"purchase_number",t)},expression:"searchFormData.purchase_number"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"日期查询"},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",shortcuts:e.shortcuts,size:e.size},on:{clear:e.WhenClear},model:{value:e.searchFormData.purchase_date__range,callback:function(t){e.$set(e.searchFormData,"purchase_date__range",t)},expression:"searchFormData.purchase_date__range"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"toolbar_buttons",fn:function(){},proxy:!0},{key:"operation",fn:function(t){var o=t.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.downloadRow(o)}}},[e._v("下载采购单")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.editRow(o)}}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.deleteRow(o)}}},[e._v("删除")])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.gridOptions,!1)),a("vxe-modal",{attrs:{title:"新增",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalDisplay,callback:function(t){e.modalDisplay=t},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"采购单号",span:24}},[a("vxe-input",{model:{value:e.modalForm.purchase_number,callback:function(t){e.$set(e.modalForm,"purchase_number",t)},expression:"modalForm.purchase_number"}})],1),a("vxe-form-item",{attrs:{title:"采购员",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalForm.username_id,callback:function(t){e.$set(e.modalForm,"username_id",t)},expression:"modalForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"供应商名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.supplier_name_options,clearable:"",filterable:""},model:{value:e.modalForm.supplier_name_id,callback:function(t){e.$set(e.modalForm,"supplier_name_id",t)},expression:"modalForm.supplier_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"联系人",span:24}},[a("vxe-input",{model:{value:e.modalForm.contact_person,callback:function(t){e.$set(e.modalForm,"contact_person",t)},expression:"modalForm.contact_person"}})],1),a("vxe-form-item",{attrs:{title:"联系方式",span:24}},[a("vxe-input",{model:{value:e.modalForm.contact_number,callback:function(t){e.$set(e.modalForm,"contact_number",t)},expression:"modalForm.contact_number"}})],1),a("vxe-form-item",{attrs:{title:"采购日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.purchase_date,callback:function(t){e.$set(e.modalForm,"purchase_date",t)},expression:"modalForm.purchase_date"}})],1),a("vxe-form-item",{attrs:{title:"币种",span:24}},[a("vxe-input",{model:{value:e.modalForm.currency,callback:function(t){e.$set(e.modalForm,"currency",t)},expression:"modalForm.currency"}})],1),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalForm.remark,callback:function(t){e.$set(e.modalForm,"remark",t)},expression:"modalForm.remark"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalEditDisplay,callback:function(t){e.modalEditDisplay=t},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"采购单号",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.purchase_number,callback:function(t){e.$set(e.modalEditForm,"purchase_number",t)},expression:"modalEditForm.purchase_number"}})],1),a("vxe-form-item",{attrs:{title:"采购员",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalEditForm.username_id,callback:function(t){e.$set(e.modalEditForm,"username_id",t)},expression:"modalEditForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"供应商名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.supplier_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.supplier_name_id,callback:function(t){e.$set(e.modalEditForm,"supplier_name_id",t)},expression:"modalEditForm.supplier_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"联系人",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.contact_person,callback:function(t){e.$set(e.modalEditForm,"contact_person",t)},expression:"modalEditForm.contact_person"}})],1),a("vxe-form-item",{attrs:{title:"联系方式",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.contact_number,callback:function(t){e.$set(e.modalEditForm,"contact_number",t)},expression:"modalEditForm.contact_number"}})],1),a("vxe-form-item",{attrs:{title:"采购日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.purchase_date,callback:function(t){e.$set(e.modalEditForm,"purchase_date",t)},expression:"modalEditForm.purchase_date"}})],1),a("vxe-form-item",{attrs:{title:"币种",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.currency,callback:function(t){e.$set(e.modalEditForm,"currency",t)},expression:"modalEditForm.currency"}})],1),a("vxe-form-item",{attrs:{title:"备注",span:24}},[a("vxe-input",{model:{value:e.modalEditForm.remark,callback:function(t){e.$set(e.modalEditForm,"remark",t)},expression:"modalEditForm.remark"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalEditDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1)],1)},r=[],n=(a("a434"),a("a388")),i=a("d96b"),s={data:function(){var e=this;return{current_purchase_number:"",selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalEditForm:{},searchFormData:{},gridOptions:{resizable:!0,showOverflow:!0,border:"inner",rowId:"id",rowConfig:{isHover:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:10,pageSizes:[10,50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page,o=(t.sorts,t.filters,{action:"purchase_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.searchFormData});return Object(i["a"])(o)}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号"},{field:"purchaseid",title:"ID",visible:!1},{field:"purchase_number",title:"采购单号"},{field:"username_id",title:"采购员"},{field:"supplier_name_id",title:"供应商名称"},{field:"contact_person",title:"联系人"},{field:"contact_number",title:"联系方式"},{field:"purchase_date",title:"采购日期"},{field:"currency",title:"币种"},{field:"remark",title:"备注"},{title:"操作",showOverflow:!0,width:"320px",fixed:"right",slots:{default:"operation"}}]}}},created:function(){},mounted:function(){this.getOptions()},methods:{getOptions:function(){var e=this,t={action:"purchase_table_view",subaction:"getOptions"};Object(i["a"])(t).then((function(t){e.selectoptions=t.data}))},addRow:function(){this.modalForm={},this.modalDisplay=!0},modalSubmitEvent:function(){var e=this,t={action:"purchase_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(i["a"])(t).then((function(t){e.modalDisplay=!1,n["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var a=t.$refs.xGrid.$data["tableData"];for(var o in a)e.id===a[o].id&&a.splice(o,1);var r={action:"purchase_table_view",subaction:"deleteRecord",idmap:{purchaseid:e.purchaseid}};Object(i["a"])(r).then((function(e){n["VXETable"].modal.message({content:"删除成功",status:"success"}),t.$refs.xGrid.commitProxy("reload")}))}))},downloadRow:function(e){var t={purchase_number:e.purchase_number};Object(i["b"])(t).then((function(e){n["VXETable"].saveFile({filename:e.headers["my_file_name_no_suffix"],type:e.headers["my_file_type"],content:e.data}).then((function(){}))}))},editRow:function(e){this.$router.push({path:"/erppurchase/purchase_manifest_modify",query:{purchase_number:e.purchase_number}})},modalEditSubmitEvent:function(){var e=this,t={action:"purchase_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{purchaseid:this.modalEditForm.purchaseid}};Object(i["a"])(t).then((function(t){e.modalEditDisplay=!1,n["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},resetEvent:function(){this.searchFormData={},this.$refs.xGrid.commitProxy("reload")}}},l=s,m=a("2877"),c=Object(m["a"])(l,o,r,!1,null,null,null);t["default"]=c.exports},d96b:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var o=a("b775");function r(e){return Object(o["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/vue-element-admin/backend/download_file/",method:"get",params:e})}}}]);