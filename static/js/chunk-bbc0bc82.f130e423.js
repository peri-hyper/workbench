(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbc0bc82"],{"0028":function(e,t,a){},"0c56":function(e,t,a){},"46d8":function(e,t,a){"use strict";a("0c56")},"726f":function(e,t,a){"use strict";a("0028")},"78e3":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vxe-modal",{attrs:{title:"附件上传",width:"860px",resize:"","destroy-on-close":"","show-footer":""},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确认")]),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticClass:"dialog-body"},[a("el-upload",{ref:"uploader",staticClass:"upload-btn",attrs:{limit:e.maxCount,"auto-upload":!1,"show-file-list":!1,multiple:!0,"on-exceed":e.handleExceed,"on-change":e.handleSelect}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-upload2",staticStyle:{"margin-right":"4px"}}),e._v("选择文件 ")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" "+e._s(e.maxCount===1/0?"":"最多上传"+e.maxCount+" 个文件")+" ")])],1),a("div",{ref:"dropZone",staticClass:"file-zone",on:{dragenter:function(t){return t.preventDefault(),e.onDragEnter(t)},dragover:function(e){e.preventDefault()},dragleave:function(t){return t.preventDefault(),e.onDragLeave(t)},drop:function(t){return t.preventDefault(),e.onDrop(t)}}},[a("transition",{attrs:{name:"fade"}},[e.dragging?a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"48px"}}),a("p",[e._v("松开鼠标上传文件")])]):e._e()]),a("vxe-table",{attrs:{data:e.fileList,"show-overflow":"",size:"small",height:"400"}},[a("vxe-column",{attrs:{type:"seq",width:"50",title:"#"}}),a("vxe-column",{attrs:{field:"filename",title:"文件名"}}),a("vxe-column",{attrs:{field:"file_size",title:"大小(MB)",width:"120",align:"center"}}),a("vxe-column",{attrs:{title:"操作",width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.editName(n)}}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:function(t){return e.remove(n)}}},[e._v("删除")])]}}])})],1)],1)],1)])},i=[],r=a("b85c"),o=a("5530"),s=a("2909"),l=(a("a630"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("3ca3"),a("0643"),a("4e3e"),a("a573"),a("9a9a"),a("159b"),{name:"UploadAttachmentDialog",props:{value:{type:Boolean,default:!1},initFiles:{type:Array,default:function(){return[]}},maxCount:{type:Number,default:1/0}},data:function(){return{visible:this.value,dragging:!1,fileList:Object(s["a"])(this.initFiles)}},watch:{initFiles:function(e){var t=this;this.fileList=e.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{file_size:t.toMB(e.file_size)})})),console.log(this.fileList)},value:function(e){this.visible=e},visible:function(e){this.$emit("input",e)}},methods:{handleExceed:function(){this.$message.warning("最多只能上传 ".concat(this.maxCount===1/0?"不限":this.maxCount+" 件"," 附件"))},isDirectory:function(e){return!e.type&&0===e.file_size},toKB:function(e){return(e/1024).toFixed(1)},toMB:function(e){return(e/1024/1024).toFixed(2)},handleSelect:function(e){this.isDirectory(e.raw||e)?this.$message.warning("暂不支持文件夹上传，请选择具体文件"):this.pushFile(e.raw||e)},onDragEnter:function(){this.dragging=!0},onDragLeave:function(e){var t=this.$refs.dropZone;t.contains(e.relatedTarget)||(this.dragging=!1)},onDrop:function(e){var t=this;this.dragging=!1;var a=e.dataTransfer,n=a.items,i=a.files;if(n&&n.length){var o,s=Object(r["a"])(n);try{for(s.s();!(o=s.n()).done;){var l,c=o.value;if("file"===c.kind){var d=null===(l=c.webkitGetAsEntry)||void 0===l?void 0:l.call(c);if(d&&d.isDirectory)this.$message.warning("暂不支持文件夹上传，请选择具体文件");else{var u=c.getAsFile();this.pushFile(u)}}}}catch(p){s.e(p)}finally{s.f()}}else Array.from(i||[]).forEach((function(e){t.isDirectory(e)?t.$message.warning("暂不支持文件夹上传，请选择具体文件"):t.pushFile(e)}))},pushFile:function(e){var t=this;this.fileList.some((function(a){return a.filename===e.name&&a.file_size===t.toMB(e.size)}))?this.$message.warning("发现重名文件 ".concat(e.name," ，如需覆盖原文件请先删除原文件。")):this.fileList.push({uid:Date.now()+Math.random(),filename:e.name,file_size:this.toMB(e.size),raw:e})},remove:function(e){var t=this;this.$confirm("确认删除此文件？","提示").then((function(){var a=t.fileList.indexOf(e);a>-1&&t.fileList.splice(a,1)}))},editName:function(e){var t=e.filename.lastIndexOf("."),a=-1!==t?e.filename.slice(t):"",n=-1!==t?e.filename.slice(0,t):e.filename;this.$prompt("修改文件名（扩展名 ".concat(a," 会自动保留）"),"重命名",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:n,inputPattern:/^[^\\/:*?"<>|]+$/,inputErrorMessage:'文件名不能包含 \\ / : * ? " < > |'}).then((function(t){var n=t.value;e.filename=n+a}))},handleConfirm:function(){this.$emit("confirm",this.fileList),this.visible=!1}}}),c=l,d=(a("726f"),a("2877")),u=Object(d["a"])(c,n,i,!1,null,"b71fea88",null);t["a"]=u.exports},"7db0":function(e,t,a){"use strict";var n=a("23e7"),i=a("b727").find,r=a("44d2"),o=a("ae40"),s="find",l=!0,c=o(s);s in[]&&Array(1)[s]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},"89c4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"0 50px 0 50px"}},[a("vxe-grid",e._b({ref:"xGrid",attrs:{"checkbox-config":{highlight:!0,range:!0},"highlight-current-row":""},on:{"current-change":e.handleCurrentChange,"toggle-row-expand":e.handleToggleExpand,"cell-dblclick":e.queryDataHandle},scopedSlots:e._u([{key:"search_buttons",fn:function(){return[a("vxe-form",{attrs:{data:e.shppingsearchFormData},on:{submit:e.searchEvent,reset:e.resetEvent}},[a("vxe-form-item",{attrs:{title:"全局搜索"},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-input",{attrs:{placeholder:"请选择",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},on:{clear:e.WhenClear},model:{value:e.shppingsearchFormData.search_data,callback:function(t){e.$set(e.shppingsearchFormData,"search_data",t)},expression:"shppingsearchFormData.search_data"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"日期查询"},scopedSlots:e._u([{key:"default",fn:function(){return[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",shortcuts:e.shortcuts,size:e.size},on:{clear:e.WhenClear},model:{value:e.shppingsearchFormData.delivery_date,callback:function(t){e.$set(e.shppingsearchFormData,"delivery_date",t)},expression:"shppingsearchFormData.delivery_date"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{"item-render":{name:"$buttons",children:[{props:{type:"submit",content:"查询",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}})],1)]},proxy:!0},{key:"toolbar_buttons",fn:function(){return[a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.addRow()}}},[e._v("添加发货单")]),a("vxe-button",{attrs:{status:"primary"},on:{click:e.editRowHandle}},[e._v("编辑")]),a("vxe-button",{attrs:{status:"danger"},on:{click:e.deleteRowHandle}},[e._v("删除")]),a("vxe-button",{attrs:{status:"primary"},on:{click:e.dowloadFileHandle}},[e._v("下载PDF")]),a("vxe-button",{attrs:{status:"primary"},on:{click:e.downloadExcelHandle}},[e._v("下载Excel")]),a("vxe-button",{attrs:{status:"warning"},on:{click:function(t){return e.batchDownload("pdf")}}},[e._v("批量下载 PDF")]),a("vxe-button",{attrs:{status:"warning"},on:{click:function(t){return e.batchDownload("excel")}}},[e._v("批量下载 Excel")]),a("vxe-button",{attrs:{status:"primary"},on:{click:function(t){return e.showUploadFile()}}},[e._v("回单管理")]),a("vxe-button",{attrs:{status:"primary"},on:{click:e.batchDownloadShippingTable}},[e._v("批量下载回单")])]},proxy:!0},{key:"expandContent",fn:function(t){var n=t.row;return[a("div",{staticClass:"expand-container",staticStyle:{padding:"12px",background:"#f9fafb",border:"1px solid #ebeef5"}},[a("div",{staticStyle:{display:"flex",gap:"16px"}},[a("div",{staticStyle:{flex:"1","min-width":"480px"}},[a("h4",{staticClass:"mb-2"},[e._v("发货明细（订单号："+e._s(n.order_number)+"）")]),a("vxe-grid",{key:n._shipLoaded,ref:"gridShip_"+n.order_number,attrs:{data:n._ship||[],columns:e.shipColumns,"highlight-current-row":"","keep-source":"",size:"mini","max-height":"360","show-overflow":""}})],1),a("div",{staticStyle:{flex:"1","min-width":"360px"}},[a("div",{staticStyle:{display:"flex","align-items":"center",gap:"25px"}},[a("h4",{staticClass:"mr-2"},[e._v("附件列表")]),a("el-upload",{ref:"uploader",staticClass:"upload-btn",attrs:{limit:1,"auto-upload":!1,"show-file-list":!1,multiple:!0,"on-exceed":e.handleExceed,"on-change":function(t,a){return e.handleSelect(t,a,n)}}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"el-icon-upload2",staticStyle:{"margin-right":"4px"}}),e._v("选择文件 ")])],1)],1),a("div",{ref:"dropZone",staticClass:"file-zone",staticStyle:{position:"relative"},on:{dragenter:function(t){return t.preventDefault(),e.onDragEnter(t)},dragover:function(e){e.preventDefault()},dragleave:function(t){return t.preventDefault(),e.onDragLeave(t)},drop:function(t){return t.preventDefault(),e.onDrop(t,n,e.rowIndex)}}},[a("transition",{attrs:{name:"fade"}},[e.dragging?a("div",{staticClass:"mask",staticStyle:{position:"absolute",inset:"0",background:"rgba(0,0,0,0.45)",color:"#fff","z-index":"10"}},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"48px"}}),a("p",[e._v("松开鼠标上传文件")])]):e._e()]),a("vxe-grid",{key:n._attachLoaded,ref:"gridAttach_"+n.purchase_number,attrs:{data:n._attach||[],columns:e.attachmentColumns,"highlight-current-row":"","keep-source":"",size:"mini",height:"300","show-overflow":""}})],1)])])])]}},{key:"empty",fn:function(){return[a("span",{},[a("p",[e._v("没有数据！")])])]},proxy:!0}])},"vxe-grid",e.shppinggridOptions,!1)),a("vxe-modal",{attrs:{title:"请选择打印模板",width:"900",resize:"","destroy-on-close":""},model:{value:e.modalDisplayPrint,callback:function(t){e.modalDisplayPrint=t},expression:"modalDisplayPrint"}},[a("el-form",{staticClass:"form",attrs:{"label-width":"100px"}},[a("el-row",{staticStyle:{width:"96%"},attrs:{xs:24}},[[a("div",e._l(e.groupedOptions,(function(t,n){return a("div",{key:n,staticClass:"row"},e._l(t,(function(t){return a("div",{key:t.label,staticClass:"col",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"form-item"},[a("img",{staticClass:"image",attrs:{src:t.image,alt:"模板"+t.label},on:{click:function(a){return e.EnlargePicture(t.image)}}}),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],attrs:{type:"radio"},domProps:{value:t.label,checked:e._q(e.selectedOption,t.label)},on:{change:[function(a){e.selectedOption=t.label},e.handleRadioChange]}}),e._v(" 类型"+e._s(t.label)+" ")])])])})),0)})),0)]],2),a("el-row",{staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplayPrint=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:e.EnterDownloadRow}},[e._v("下载")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.imageUrl,alt:"预览图片"}})]),a("vxe-modal",{attrs:{title:"新增",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalDisplay,callback:function(t){e.modalDisplay=t},expression:"modalDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalForm.project_name_id,callback:function(t){e.$set(e.modalForm,"project_name_id",t)},expression:"modalForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:e.modalForm.driver_name_id,callback:function(t){e.$set(e.modalForm,"driver_name_id",t)},expression:"modalForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalForm.username_id,callback:function(t){e.$set(e.modalForm,"username_id",t)},expression:"modalForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalForm.customer_name_id,callback:function(t){e.$set(e.modalForm,"customer_name_id",t)},expression:"modalForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalForm.delivery_date,callback:function(t){e.$set(e.modalForm,"delivery_date",t)},expression:"modalForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"编辑",width:"500",resize:"","destroy-on-close":""},model:{value:e.modalEditDisplay,callback:function(t){e.modalEditDisplay=t},expression:"modalEditDisplay"}},[a("vxe-form",{attrs:{"title-align":"right","title-width":"100"},on:{submit:e.modalEditSubmitEvent}},[a("vxe-form-item",{attrs:{title:"项目名称",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.project_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.project_name_id,callback:function(t){e.$set(e.modalEditForm,"project_name_id",t)},expression:"modalEditForm.project_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"司机姓名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.driver_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.driver_name_id,callback:function(t){e.$set(e.modalEditForm,"driver_name_id",t)},expression:"modalEditForm.driver_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"发货人",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.username_options,clearable:"",filterable:""},model:{value:e.modalEditForm.username_id,callback:function(t){e.$set(e.modalEditForm,"username_id",t)},expression:"modalEditForm.username_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"客户名",span:24},scopedSlots:e._u([{key:"default",fn:function(){return[a("vxe-select",{attrs:{placeholder:"请搜索",options:e.selectoptions.customer_name_options,clearable:"",filterable:""},model:{value:e.modalEditForm.customer_name_id,callback:function(t){e.$set(e.modalEditForm,"customer_name_id",t)},expression:"modalEditForm.customer_name_id"}})]},proxy:!0}])}),a("vxe-form-item",{attrs:{title:"出货日期",span:24}},[a("vxe-input",{attrs:{type:"date",placeholder:"请选择日期",clearable:""},model:{value:e.modalEditForm.delivery_date,callback:function(t){e.$set(e.modalEditForm,"delivery_date",t)},expression:"modalEditForm.delivery_date"}})],1),a("vxe-form-item",{attrs:{align:"center","title-align":"center",span:24}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalEditDisplay=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"}},[e._v("提交")])],1)],1)],1),a("vxe-modal",{attrs:{title:"请选择模板",width:"900",resize:"","destroy-on-close":""},on:{close:e.handleClose},model:{value:e.modalBatchPrint,callback:function(t){e.modalBatchPrint=t},expression:"modalBatchPrint"}},[a("el-form",{staticClass:"form",attrs:{"label-width":"100px"}},[[a("div",e._l(e.groupedOptions,(function(t,n){return a("div",{key:n,staticClass:"row"},e._l(t,(function(t){return a("div",{key:t.label,staticClass:"col",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"form-item"},[a("img",{staticClass:"image",attrs:{src:t.image,alt:"模板"+t.label},on:{click:function(a){return e.EnlargePicture(t.image)}}}),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],attrs:{type:"radio"},domProps:{value:t.label,checked:e._q(e.selectedOption,t.label)},on:{change:[function(a){e.selectedOption=t.label},e.handleRadioChange]}}),e._v(" 类型"+e._s(t.label)+" ")])])])})),0)})),0)],a("el-row",{staticStyle:{"text-align":"center"}},[a("vxe-button",{attrs:{type:"reset"},on:{click:function(t){e.modalBatchPrint=!1}}},[e._v("取消")]),a("vxe-button",{attrs:{type:"submit",status:"primary"},on:{click:e.confirmBatchTemplate}},[e._v("下载")])],1)],2)],1),a("upload-attachment-dialog",{attrs:{"max-count":1,"init-files":e.oldFiles},on:{confirm:e.handleAttachConfirm},model:{value:e.modalUploadDisplay,callback:function(t){e.modalUploadDisplay=t},expression:"modalUploadDisplay"}})],1)},i=[],r=a("b85c"),o=a("3835"),s=a("c7eb"),l=a("1da1"),c=a("5530"),d=(a("99af"),a("4de4"),a("7db0"),a("a630"),a("caad"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("b0c0"),a("e9c4"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("25f0"),a("2532"),a("3ca3"),a("5319"),a("0643"),a("2382"),a("fffc"),a("4e3e"),a("a573"),a("9d4a"),a("159b"),a("ddb0"),a("a388")),u=a("d96b"),p=a("2f62"),m=a("5c96"),f=a("78e3"),h="O:\\producterp\\producterp\\attachments\\shippingtable\\",b="http://127.0.0.1:3210",g={components:{UploadAttachmentDialog:f["a"]},computed:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["sidebar","avatar","device","name","shppingsearchFormData","select_row_number","list_scroll_top","list_current_page","expanded_rows"])),{},{groupedOptions:function(){var e=3;return this.options.reduce((function(t,a,n){var i=Math.floor(n/e);return t[i]||(t[i]=[]),t[i].push(a),t}),[])}}),data:function(){var e=this,t=this.$createElement;return{dragging:!1,oldFiles:[],modalBatchPrint:!1,attachCache:Object.create(null),batchShippingIds:[],batchType:"",dowloadRow:[],uploadData:{file_type:"已签收发货单"},modalUploadDisplay:!1,imageUrl:"",dialogVisible:!1,shippingid:[],selectedOption:{},options:[{label:"1",image:"http://192.168.1.223:8000/static/template 1.jpg"},{label:"2",image:"http://192.168.1.223:8000/static/template 2.jpg"},{label:"3",image:"http://192.168.1.223:8000/static/template 3.jpg"},{label:"4",image:"http://192.168.1.223:8000/static/template 4.jpg"},{label:"5",image:"http://192.168.1.223:8000/static/template 5.jpg"},{label:"6",image:"http://192.168.1.223:8000/static/template 6.jpg"}],selectoptions:{},modalDisplay:!1,modalForm:{},modalEditDisplay:!1,modalDisplayPrint:!1,modalEditForm:{},shppinggridOptions:{resizable:!0,height:1100,showOverflow:!0,border:"inner",rowId:"id",rowConfig:{isHover:!0},filterConfig:{remote:!0},pagerConfig:{pageSize:35,pageSizes:[35,50,100,500],layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"]},proxyConfig:{seq:!0,sort:!0,filter:!0,props:{list:"data",result:"data",total:"total"},ajax:{query:function(t){var a=t.page;t.sorts,t.filters;e.shppingsearchFormData.username=e.name;var n={action:"shipping_table_view",subaction:"query",pageNum:a.currentPage,pageSize:a.pageSize,searchForm:e.shppingsearchFormData};return Object(u["b"])(n)}}},formConfig:{titleWidth:100,titleAlign:"right",items:[{slots:{default:"search_buttons"}}]},toolbarConfig:{slots:{buttons:"toolbar_buttons"}},columns:[{type:"seq",title:"序号",width:60,align:"center"},{type:"checkbox",width:60,align:"center"},{type:"expand",width:40,align:"center",showOverflow:!1,className:"bg-white pl-2",slots:{content:"expandContent"}},{field:"customer_name_id",title:"客户名",width:"300px",sortable:!0},{field:"order_number",title:"订单号码",width:"260px",sortable:!0},{field:"shippingid",title:"发货单编号",width:"160px",sortable:!0},{field:"shipping_address",title:"送货地址",sortable:!0},{field:"driver_name_id",title:"司机姓名"},{field:"username_id",title:"发货人",sortable:!0},{field:"delivery_date",title:"出货日期",sortable:!0},{field:"sign_back",title:"是否回签",width:100,align:"center",formatter:function(e){var t=e.row;return 1===t.sign_back?"否":"是"},className:function(e){var t=e.row;return 1===t.sign_back?"aog-red":"aog-green"}}]},shipColumns:[{type:"seq",title:"序号",width:60},{field:"detailid",title:"产品ID",visible:!1},{field:"order_number_id",title:"订单号码"},{field:"commodity_details",title:"品名"},{field:"commodity_size",title:"规格"},{field:"control_no",title:"编号"},{field:"commodity_units",title:"单位"},{field:"shipping_quantity",title:"发货数量"},{field:"shipping_weight",title:"发货重量"}],attachmentColumns:[{type:"seq",width:50,title:"#"},{field:"filename",title:"文件名",showOverflow:!0},{field:"object_id",title:"object_id",visible:!1},{field:"stored_name",title:"object_id",visible:!1},{field:"file_size",title:"大小",align:"center",formatter:function(e){var t=e.cellValue;return null==t||""===t?"":(t/1048576).toFixed(2)+" MB"}},{field:"upload_time",title:"上传时间",width:160,align:"center"},{title:"操作",width:140,align:"center",slots:{default:function(a){var n=a.row;return[t("vxe-button",{attrs:{size:"mini",status:"primary"},on:{click:function(){return e.openLocalFile(n)}}},["打开"]),t("vxe-button",{attrs:{size:"mini",status:"primary"},on:{click:function(){return e.download(n)}}},["下载"])]}}}]}},created:function(){},mounted:function(){var e=this;this.getOptions(),this.$refs.xGrid.commitProxy("query").then((function(){e.$nextTick((function(){return setTimeout(e.autoRecover,0)}))})),this.$refs.radio.$children.forEach((function(e){e.$refs.radio.removeAttribute("aria-hidden")}))},methods:{handleSelect:function(e,t,a){var n=this;return Object(l["a"])(Object(s["a"])().mark((function i(){var r,o,l,c;return Object(s["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!n.isDirectory(e.raw||e)){i.next=3;break}return n.$message.warning("暂不支持文件夹上传，请选择具体文件"),i.abrupt("return");case 3:if(n.pushFile(e.raw||e),!(t.length>1)){i.next=7;break}return n.$refs.uploader.clearFiles(),i.abrupt("return",n.$message.warning("一次仅允许上传 1 个文件"));case 7:if(!e.raw||""!==e.raw.type||0!==e.raw.size){i.next=10;break}return n.$refs.uploader.clearFiles(),i.abrupt("return",n.$message.warning("暂不支持上传文件夹，请选择文件"));case 10:if(r=Number(a.shippingid),o=a._attach||[],l=o.find((function(t){return t.filename===e.name})),!o.length){i.next=25;break}return i.prev=14,i.next=17,n.$confirm(l?"存在同名文件，是否覆盖？":"此送货单已有回单，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0});case 17:i.next=23;break;case 19:return i.prev=19,i.t0=i["catch"](14),n.$refs.uploader.clearFiles(),i.abrupt("return");case 23:return i.next=25,Object(u["b"])({action:"attachment_file_view",subaction:"bulk_delete",ids:o.map((function(e){return e.attachmentid}))});case 25:return c=new FormData,c.append("action","attachment_file_view"),c.append("subaction","add"),c.append("searchForm",JSON.stringify({model:"app.ShippingTable",pk:r})),c.append("maxCount",1),c.append("files",e.raw),i.next=33,Object(u["b"])(c,{headers:{"Content-Type":"multipart/form-data"}});case 33:return n.$refs.uploader.clearFiles(),i.next=36,n.refreshAttach(a);case 36:d["VXETable"].modal.message({content:"上传成功",status:"success"});case 37:case"end":return i.stop()}}),i,null,[[14,19]])})))()},refreshAttach:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var n;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["b"])({action:"attachment_file_view",subaction:"query",pageNum:1,pageSize:1e3,searchForm:{model:"app.ShippingTable",shippingid:e.shippingid}});case 2:n=a.sent,t.$set(e,"_attach",n.data||[]),t.$set(e,"_attachLoaded",Date.now());case 5:case"end":return a.stop()}}),a)})))()},handleExceed:function(){this.$message.warning("最多只能上传 ".concat(this.maxCount===1/0?"不限":this.maxCount+" 件"," 附件"))},onDragEnter:function(){this.dragging=!0},onDragLeave:function(e){var t=this.$refs.dropZone;t.contains(e.relatedTarget)||(this.dragging=!1)},onDrop:function(e,t){var a=this;return Object(l["a"])(Object(s["a"])().mark((function n(){var i,r,o,l,c;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.dragging=!1,i=Array.from(e.dataTransfer.files||[]),i.length){n.next=4;break}return n.abrupt("return");case 4:if(r=Number(t.shippingid),o=t._attach||[],!o.length){n.next=18;break}return n.prev=7,n.next=10,a.$confirm("此送货单已有回单，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0});case 10:n.next=15;break;case 12:return n.prev=12,n.t0=n["catch"](7),n.abrupt("return");case 15:return l=o.map((function(e){return e.attachmentid})),n.next=18,Object(u["b"])({action:"attachment_file_view",subaction:"bulk_delete",ids:l});case 18:return c=new FormData,c.append("action","attachment_file_view"),c.append("subaction","add"),c.append("searchForm",JSON.stringify({model:"app.ShippingTable",pk:r})),c.append("maxCount",1),c.append("files",i[0]),n.next=26,Object(u["b"])(c,{headers:{"Content-Type":"multipart/form-data"}});case 26:return n.next=28,a.refreshAttach(t);case 28:d["VXETable"].modal.message({content:"上传成功",status:"success"});case 29:case"end":return n.stop()}}),n,null,[[7,12]])})))()},batchDownloadShippingTable:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function e(){var a,n,i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$refs.xGrid,n=a.getCheckboxRecords(),n.length){e.next=5;break}return d["VXETable"].modal.message({content:"请先勾选要下载的附件",status:"warning"}),e.abrupt("return");case 5:i=n.filter((function(e){return 2===Number(e.sign_back)})).map((function(e){return e.shippingid})),console.log(i),t.withLoading(Object(l["a"])(Object(s["a"])().mark((function e(){var a,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["a"])({action:"attachment_file_view",subaction:"batch_download",shippingids:i},{responseType:"blob",timeout:0});case 3:a=e.sent,n="attachments.zip",d["VXETable"].saveFile({filename:n,type:"zip",content:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$message.error("下载失败");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))));case 8:case"end":return e.stop()}}),e)})))()},download:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.withLoading(Object(l["a"])(Object(s["a"])().mark((function t(){var a,n,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])({action:"attachment_file_view",subaction:"download",id:e.attachmentid},{responseType:"blob",noCodeCheck:!0});case 2:a=t.sent,n=e.filename.split(".").pop(),i=e.filename.replace(new RegExp("\\.".concat(n,"$"),"i"),""),d["VXETable"].saveFile({filename:i,type:n,content:a.data});case 6:case"end":return t.stop()}}),t)})))).catch((function(){t.$message.error("下载失败")}));case 1:case"end":return a.stop()}}),a)})))()},showUploadFile:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.getSelectedRow(),t.next=3,Object(u["b"])({action:"attachment_file_view",subaction:"query",pageNum:1,pageSize:1e3,searchForm:{model:"app.ShippingTable",shippingid:a.shippingid}});case 3:n=t.sent,console.log(n.data),e.oldFiles=n.data||[],a&&(e.modalUploadDisplay=!0);case 7:case"end":return t.stop()}}),t)})))()},openLocalFile:function(e){var t=arguments,a=this;return Object(l["a"])(Object(s["a"])().mark((function n(){var i,r,l,c,u,p,f,g,v,x,_,w;return Object(s["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],null!==(i=e)&&void 0!==i&&i.row&&(e=e.row),l=e.stored_name,l){n.next=6;break}return d["VXETable"].modal.message({content:"记录里没有文件名",status:"error"}),n.abrupt("return");case 6:return c=m["Loading"].service({lock:!0,text:"文件打开中…",spinner:"el-icon-loading",background:"rgba(0,0,0,0.15)"}),u=h+e.object_id+"\\"+l,console.log(u),a.lastOpenedPath=r?"":u,n.prev=10,p=500,n.next=14,Promise.all([fetch("".concat(b,"/open"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:u,readonly:r,user:a.name})}),new Promise((function(e){return setTimeout(e,p)}))]);case 14:if(f=n.sent,g=Object(o["a"])(f,1),v=g[0],200!==v.status){n.next=19;break}return n.abrupt("return");case 19:if(423!==v.status){n.next=28;break}return n.next=22,v.json();case 22:return x=n.sent,_=x.lock_info,w="".concat(_.user," @ ").concat(_.host," 正在编辑。\n要只读打开吗？"),n.next=27,a.$confirm(w,"文件被占用",{confirmButtonText:"只读打开",cancelButtonText:"取消",type:"warning"});case 27:return n.abrupt("return",a.openLocalFile(e,!0));case 28:return n.t0=Error,n.next=31,v.text();case 31:throw n.t1=n.sent,new n.t0(n.t1);case 35:n.prev=35,n.t2=n["catch"](10),d["VXETable"].modal.message({content:"打开失败："+(n.t2.message||"请检查本地助手是否已启动"),status:"error"});case 38:return n.prev=38,c.close(),n.finish(38);case 41:case"end":return n.stop()}}),n,null,[[10,35,38,41]])})))()},releaseLock:function(){this.lastOpenedPath&&fetch("".concat(b,"/release"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:this.lastOpenedPath})}).catch((function(){}))},handleAttachConfirm:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var n,i,r,o,l,c,p,m;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.getSelectedRow(),i=Number(n.shippingid),r=t.diffAttachments(t.oldFiles,e),o=r.addedFiles,l=r.deletedIds,c=r.updatedFiles,!l.length){a.next=6;break}return a.next=6,Object(u["b"])({action:"attachment_file_view",subaction:"bulk_delete",ids:l});case 6:if(!c.length){a.next=9;break}return a.next=9,Object(u["b"])({action:"attachment_file_view",subaction:"edit",files:c.map((function(e){return{attachmentid:e.attachmentid,filename:e.filename}}))});case 9:if(!o.length){a.next=17;break}return p=new FormData,p.append("action","attachment_file_view"),p.append("subaction","add"),p.append("searchForm",JSON.stringify({model:"app.ShippingTable",pk:i})),o.forEach((function(e){return p.append("files",e.raw)})),a.next=17,Object(u["b"])(p,{headers:{"Content-Type":"multipart/form-data"}});case 17:return a.next=19,t.showUploadFile();case 19:return a.next=21,Object(u["b"])({action:"attachment_file_view",subaction:"query",pageNum:1,pageSize:1e3,searchForm:{model:"app.ShippingTable",shippingid:n.shippingid}});case 21:m=a.sent,t.$set(n,"_attach",m.data||[]),t.$set(n,"_attachLoaded",Date.now()),d["VXETable"].modal.message({content:"操作成功",status:"success"});case 25:case"end":return a.stop()}}),a)})))()},diffAttachments:function(e,t){var a=t.filter((function(e){return e.raw})),n=e.filter((function(e){return!t.find((function(t){return t.attachmentid===e.attachmentid}))})).map((function(e){return e.attachmentid})),i=t.filter((function(e){return e.attachmentid&&!e.raw})).filter((function(t){var a=e.find((function(e){return e.attachmentid===t.attachmentid}));return a&&a.filename!==t.filename}));return{addedFiles:a,deletedIds:n,updatedFiles:i}},withLoading:function(e){var t=m["Loading"].service({lock:!0,text:"生成中，请稍候…",background:"rgba(0, 0, 0, 0.4)"});return e().finally((function(){return t.close()}))},confirmBatchTemplate:function(){this.selectedOption?(this.modalBatchPrint=!1,this.doBatchDownload()):d["VXETable"].modal.message({content:"请选择送货单模板",status:"warning"})},batchDownload:function(e){var t=this.$refs.xGrid.getCheckboxRecords();t.length?(this.batchShippingIds=t.map((function(e){return e.shippingid})),this.batchType=e,"pdf"===e?(this.selectedOption="",this.modalBatchPrint=!0):this.doBatchDownload()):d["VXETable"].modal.message({content:"请先勾选要下载的行",status:"warning"})},doBatchDownload:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.withLoading(Object(l["a"])(Object(s["a"])().mark((function t(){var a,n,i,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="pdf"===e.batchType?"batchDownloadPdf":"batchDownloadExcel",t.next=3,Object(u["b"])({action:"shipping_table_view",subaction:a,shippingids:e.batchShippingIds,file_type:e.selectedOption||"1"},{timeout:0});case 3:return n=t.sent,i=n.data,t.next=7,Object(u["c"])({zip_name:i.zip_name},{responseType:"blob",timeout:0});case 7:r=t.sent,d["VXETable"].saveFile({filename:"送货单批量_".concat((new Date).toISOString().slice(0,10)),type:"zip",content:r.data});case 9:case"end":return t.stop()}}),t)})))).catch((function(){e.$message.error("批量下载失败")}));case 1:case"end":return t.stop()}}),t)})))()},queryDataHandle:function(){var e=this,t=this.getSelectedRow();if(t){var a=this.$refs.xGrid,n=!a.isExpandByRow(t);a.toggleRowExpand(t,n),this.$nextTick((function(){e.handleToggleExpand({row:t,expanded:n})}))}},handleToggleExpand:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var n,i,r,o;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e.row,i=e.expanded,i){a.next=3;break}return a.abrupt("return");case 3:if(n._ship){a.next=9;break}return a.next=6,Object(u["b"])({action:"shipping_detail_table_view",subaction:"getProductListByShippingId",shippingid:n.shippingid});case 6:r=a.sent,t.$set(n,"_ship",r.data||[]),t.$set(n,"_shipLoaded",Date.now());case 9:if(n._attach){a.next=15;break}return a.next=12,Object(u["b"])({action:"attachment_file_view",subaction:"query",pageNum:1,pageSize:1e3,searchForm:{model:"app.ShippingTable",shippingid:n.shippingid}});case 12:o=a.sent,t.$set(n,"_attach",o.data||[]),t.$set(n,"_attachLoaded",Date.now());case 15:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=e.row;this.currentRow=t},getSelectedRow:function(){return this.currentRow?this.currentRow:(d["VXETable"].modal.message({content:"请先单击选择一行",status:"warning"}),null)},dowloadFileHandle:function(){var e=this.getSelectedRow();e&&this.downloadRow(e)},downloadExcelHandle:function(){var e=this.getSelectedRow();e&&this.downloadRowExcel(e)},editRowHandle:function(){var e=this.getSelectedRow();e&&this.queryDetailRow(e)},deleteRowHandle:function(){var e=this.getSelectedRow();e&&this.deleteRow(e)},handleRadioChange:function(){console.log("选中的类型:",this.selectedOption)},EnlargePicture:function(e){this.dialogVisible=!0,this.imageUrl=e},handleSuccess:function(e,t,a){d["VXETable"].modal.message({content:"上传成功",status:"success"})},handleClose:function(){this.dialogVisible=!1,this.modalBatchPrint=!1},CallPrint:function(){this.modalDisplayPrint=!0},WhenClear:function(){this.shppingsearchFormData={}},getOptions:function(){var e=this,t={action:"shipping_table_view",subaction:"getOptions"};Object(u["b"])(t).then((function(t){e.selectoptions=t.data}))},addRow:function(){var e=Math.floor(Date.now())%1e8;this.$router.push({path:"/erpshipping/shipping_add",query:{shippingid:e}})},modalSubmitEvent:function(){var e=this,t={action:"shipping_table_view",subaction:"addRecord",modalForm:this.modalForm};Object(u["b"])(t).then((function(t){e.modalDisplay=!1,d["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},deleteRow:function(e){var t=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(Object(l["a"])(Object(s["a"])().mark((function a(){var n,i,r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(i in n=t.$refs.xGrid.$data["tableData"],n)e.id===n[i].id&&n.splice(i,1);return r={action:"shipping_table_view",subaction:"deleteRecord",idmap:{shippingid:e.shippingid}},a.next=5,Object(u["b"])(r);case 5:return a.next=7,t.$refs.xGrid.remove(e);case 7:d["VXETable"].modal.message({content:"删除成功",status:"success"});case 8:case"end":return a.stop()}}),a)}))))},editRow:function(e){this.$router.push({path:"/erpshipping/shipping_edit",query:{shippingid:e.shippingid}})},downloadRow:function(e){this.shippingid=e.shippingid,this.dowloadRow=e,this.modalDisplayPrint=!0},EnterDownloadRow:function(){0!==this.selectedOption.length?(this.getPdfFile(),this.modalDisplayPrint=!1):d["VXETable"].modal.message({content:"请选择送货单模板",status:"warning"})},getPdfFile:function(){var e=this;this.withLoading((function(){return Object(u["c"])({shippingid_pdf:e.shippingid,file_type:e.selectedOption}).then((function(t){var a=t.headers["my_file_type"];if(!a){var n=new FileReader;return n.onload=function(){return e.$message.error(JSON.parse(n.result).msg||"生成失败")},void n.readAsText(t.data)}var i=decodeURIComponent(t.headers["my_file_name_no_suffix"]);d["VXETable"].saveFile({filename:i,type:a,content:t.data})}))})).catch((function(){return e.$message.error("网络错误，下载失败")}))},downloadRowExcel:function(e){var t=this;this.withLoading((function(){return Object(u["c"])({shippingid_excel:e.shippingid}).then((function(e){var a=e.headers["my_file_type"];if(!a||"json"===a){var n=new FileReader;return n.onload=function(){return t.$message.error(JSON.parse(n.result).msg||"下载失败")},void n.readAsText(e.data)}var i=decodeURIComponent(e.headers["my_file_name_no_suffix"]);d["VXETable"].saveFile({filename:i,type:a,content:e.data})}))})).catch((function(){return t.$message.error("网络错误，下载失败")}))},modalEditSubmitEvent:function(){var e=this,t={action:"shipping_table_view",subaction:"editRecord",modalEditForm:this.modalEditForm,idmap:{shippingid:this.modalEditForm.shippingid}};Object(u["b"])(t).then((function(t){e.modalEditDisplay=!1,d["VXETable"].modal.message({content:"提交成功",status:"success"}),e.$refs.xGrid.commitProxy("reload")}))},searchEvent:function(){this.$refs.xGrid.commitProxy("reload")},resetEvent:function(){var e=this,t=this.shppingsearchFormData;Object.keys(t).forEach((function(a){return e.$delete(t,a)})),this.$refs.xGrid.commitProxy("reload")},queryDetailRow:function(e){var t=this.$refs.xGrid.getRowIndex(e);this.$store.commit("SET_SELECT_ROW",t);var a=this.$refs.xGrid.getProxyInfo().pager;this.$store.commit("SET_CURRENT_PAGE",a.currentPage);var n=this.$refs.xGrid.$el.querySelector(".vxe-table--body-wrapper"),i=n?n.scrollTop:0;this.$store.commit("SET_SCROLL_TOP",i);var r=this.$refs.xGrid,o=r.getRowExpandRecords(),s=o.map((function(e){return e.shippingid}));this.$store.commit("SET_EXPANDED_ROWS",s),console.log("[Save] index=",t," scroll=",i),this.$router.push({path:"/erpshipping/shipping_edit",query:{shippingid:e.shippingid}})},autoRecover:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,n,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.list_current_page,n=e.$refs.xGrid,null==a){t.next=8;break}return i=n.getProxyInfo(),i&&i.pager&&(i.pager.currentPage=a),t.next=7,n.commitProxy("query");case 7:e.$store.commit("SET_CURRENT_PAGE",null);case 8:e.$nextTick(Object(l["a"])(Object(s["a"])().mark((function t(){var a,n,i,o,l,c,d;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.$refs.xGrid,n=a.getTableData().fullData,i=n.filter((function(t){return e.expanded_rows.includes(t.shippingid)})),o=Object(r["a"])(i);try{for(o.s();!(l=o.n()).done;)c=l.value,e.loadExpandData(c),a.setRowExpand(c,!0)}catch(s){o.e(s)}finally{o.f()}if(null==e.list_scroll_top){t.next=12;break}return t.next=8,e.$nextTick((function(){var t=e.$refs.xGrid;t.refreshScroll()}));case 8:return t.next=10,new Promise((function(e){return setTimeout(e,0)}));case 10:return t.next=12,new Promise((function(t,a){var n=e.$refs.xGrid;n.scrollTo(null,e.list_scroll_top).then(t).catch(a)}));case 12:null!=e.select_row_number&&(d=n[e.select_row_number],d&&a.setCurrentRow(d),e.currentRow=d),e.$store.commit("SET_EXPANDED_ROWS",[]),e.$store.commit("SET_SCROLL_TOP",null),e.$store.commit("SET_SELECT_ROW",null);case 16:case"end":return t.stop()}}),t)}))));case 9:case"end":return t.stop()}}),t)})))()},loadExpandData:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var n,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["b"])({action:"shipping_detail_table_view",subaction:"getProductListByShippingId",shippingid:e.shippingid});case 2:return n=a.sent,console.log(n.data),t.$set(e,"_ship",n.data||[]),t.$set(e,"_shipLoaded",Date.now()),a.next=8,Object(u["b"])({action:"attachment_file_view",subaction:"query",pageNum:1,pageSize:1e3,searchForm:{model:"app.ShippingTable",shippingid:e.shippingid}});case 8:i=a.sent,t.$set(e,"_attach",i.data||[]),t.$set(e,"_attachLoaded",Date.now());case 11:case"end":return a.stop()}}),a)})))()}}},v=g,x=(a("46d8"),a("2877")),_=Object(x["a"])(v,n,i,!1,null,null,null);t["default"]=_.exports},d96b:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a("5530"),i=a("b775");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(Object(n["a"])({url:"".concat("","/vue-element-admin/backend/process/"),method:"post",data:e,timeout:5e3},t))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(Object(n["a"])({url:"".concat("","/vue-element-admin/backend/download_file/"),method:"get",params:e,responseType:"blob",timeout:0},t))}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(Object(n["a"])({url:"/vue-element-admin/backend/process/",method:"post",data:e,responseType:"blob",noCodeCheck:!0,timeout:0},t))}},e9c4:function(e,t,a){var n=a("23e7"),i=a("d066"),r=a("d039"),o=i("JSON","stringify"),s=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(e,t,a){var n=a.charAt(t-1),i=a.charAt(t+1);return l.test(e)&&!c.test(i)||c.test(e)&&!l.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},u=r((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&n({target:"JSON",stat:!0,forced:u},{stringify:function(e,t,a){var n=o.apply(null,arguments);return"string"==typeof n?n.replace(s,d):n}})},fffc:function(e,t,a){"use strict";var n=a("23e7"),i=a("2266"),r=a("1c0b"),o=a("825a");n({target:"Iterator",proto:!0,real:!0},{find:function(e){return o(this),r(e),i(this,(function(t){if(e(t))return i.stop(t)}),void 0,!1,!0).result}})}}]);